/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./test/test.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/@babel/runtime/helpers/classCallCheck.js":
/*!***************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/classCallCheck.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjay5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrLmpzPzk3MGIiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfY2xhc3NDYWxsQ2hlY2s7Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@babel/runtime/helpers/classCallCheck.js\n");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/createClass.js":
/*!************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/createClass.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzLmpzPzViYzMiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgcmV0dXJuIENvbnN0cnVjdG9yO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9jcmVhdGVDbGFzczsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@babel/runtime/helpers/createClass.js\n");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/typeof.js":
/*!*******************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/typeof.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy90eXBlb2YuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy90eXBlb2YuanM/NzAzNyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBfdHlwZW9mMihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZjIob2JqKTsgfVxuXG5mdW5jdGlvbiBfdHlwZW9mKG9iaikge1xuICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIF90eXBlb2YyKFN5bWJvbC5pdGVyYXRvcikgPT09IFwic3ltYm9sXCIpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikge1xuICAgICAgcmV0dXJuIF90eXBlb2YyKG9iaik7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IF90eXBlb2YyKG9iaik7XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBfdHlwZW9mKG9iaik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3R5cGVvZjsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@babel/runtime/helpers/typeof.js\n");

/***/ }),

/***/ "./src/easy-popup_module.js":
/*!**********************************!*\
  !*** ./src/easy-popup_module.js ***!
  \**********************************/
/*! exports provided: EasyPopup */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EasyPopup\", function() { return EasyPopup; });\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/typeof */ \"./node_modules/@babel/runtime/helpers/typeof.js\");\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n// https://github.com/inspiration-tech/easy-popup\nvar EasyPopup =\n/*#__PURE__*/\nfunction () {\n  function EasyPopup() {\n    var _this = this;\n\n    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, EasyPopup);\n\n    var defaults = {\n      speed: 150,\n      styles: false,\n      replaceStyles: false,\n      mediaStyles: false,\n      templates: true,\n      allowBackgroundCallback: true,\n      allowCallbackOnEsc: true,\n      allowCallbackOnEnter: true,\n      minLoadingTime: 0,\n      loadingPic: false,\n      appendTo: false,\n      noScrollTop: false,\n      defaultAnimationShow: 'easyPopupShow',\n      defaultAnimationClose: 'easyPopupClose',\n      id: (+new Date() + Math.floor(Math.random() * 10E+10)).toString(36),\n      hideOnIos: false\n    },\n        defaultPopupParent = 'body',\n        titleHashBase = '958c1d72380718e5f4b576299fb5ea0c',\n        StyleSheet,\n        specialHashInit = false,\n        styleHandler = {\n      objToCSS: function objToCSS(obj) {\n        var html = '';\n\n        for (var prop in obj) {\n          if (!obj.hasOwnProperty(prop)) continue;\n          html += prop.replace(/[A-Z]/g, function (match) {\n            return '-' + match.toLowerCase();\n          }) + ':' + (obj[prop] !== '' ? obj[prop] : '\"\"') + ';';\n        }\n\n        return html;\n      },\n      processObj: function processObj(scriptStyleObj, paramStyleObj) {\n        for (var customSelector in paramStyleObj) {\n          if (!paramStyleObj.hasOwnProperty(customSelector)) continue;\n          customSelector = customSelector.trim().replace(/\\s+/g, ' ');\n\n          if (paramStyleObj[customSelector] === false) {\n            delete scriptStyleObj[customSelector];\n            continue;\n          }\n\n          if (!scriptStyleObj.hasOwnProperty(customSelector)) {\n            scriptStyleObj[customSelector] = paramStyleObj[customSelector];\n            continue;\n          }\n\n          for (var prop in paramStyleObj[customSelector]) {\n            if (!paramStyleObj[customSelector].hasOwnProperty(prop)) continue;\n            scriptStyleObj[customSelector][prop] = paramStyleObj[customSelector][prop];\n          }\n\n          for (var customProperty in scriptStyleObj[customSelector]) {\n            if (!scriptStyleObj[customSelector].hasOwnProperty(customProperty)) continue;\n\n            if (scriptStyleObj[customSelector][customProperty] === false) {\n              delete scriptStyleObj[customSelector][customProperty];\n            }\n          }\n        }\n\n        return scriptStyleObj;\n      }\n    },\n        defaultLoadingPic = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAIn0lEQVR4Xu1Ye4xVxRn/zZznfSwsyz7YZWNWikRNLaQm2NRHlNimiMQa0mKsQam0C5RoKQ/NEmAFlLVFaLUPWiJ9EButKTRoSwUfENS28hAflKU1pjx2l92Fde/d+zz3zEy/mdywN/JHRZcLTfY795eZMye55/f7vm+++e7FsA1jGMO4qGA4T2v+zqwNQRDMsm1LWZYNy7IU5wyMscEvZOwTvIOZB8rMFYNCgXG25MdP/moLzsNsnKcdP37simyuUOW5HryIA8/xYNv8XJ5QUOfQLb03tM26dkAYSpFJJ8de8AisWv7QhFGjK49edtk4XP65cYhHY3A9EmFZkEpASoAzDsti4LYNKA4lQwglIAoCSkkUg0TgCMIAA4kBnDrV++JXp94+HWQXNALpbLrbTbvIplOErPFgUAigI+J4Plzfh8UYlBqMArNc2ExB6xFhAblcFkE+b9xXKIRIZ9LIZgc6QXbBBTy+7qeJNa0PZ4SQUSkllFLwPA+x2EgoISBECCHVYBoZBQArmft+BJFIlEhnUAgKYDDh6CiLAAOl9oQinAowuI4Ly3YQhoERo6R5DpRGANokzJxxSLqYxUhIFPkgQEhRCYPg7bIJsG37uXw+N1UqCcY5hJDgMPlNGPR8iRXJA2CSRgYeMoQshMU4hBRHZsyc9ULZBDDOng9l+LNsLhNTUgIEaXFAwYgBNHBWDJkRyjkz0XJsC0rCpFomm4IM5Tp8SuP4FPbQsjUZJtW2fCYNcIbkQBJdnSfNPB6PIRLz4XkuHMc2iER8Wo8jl83h0MED+O3vfo2NG580+yWfz3dU11Sb2l+uCBgEQf7BVCo5RRSChhe3b8XOXS/Bc12MGDES9Q1j0djYiIaGRrMv/nX0CI4ebUcymYRlcQT5APfOnoN0KpmRYfjta667qVC2k7gUv9/yy8l1tXU7mpquqFqy5AEoABa3IKWEEAJmj9DFLU7EbZP7hSDA6JpqLF/emk7290+beO31e8rYSpyL7VufuXJsfeOOzp7upo0/fwqu6xJZy3i+aJq4EVMoFFBdXYtFS5YkucRXrp44+S1cCvbazm3ukff3L//r9q2ZGV+/Vd13zwy16PvNaumi+WrRwrnq/vtmqjum36qe+OEj6YP7X3/8vYNv1uBStKP/PBQ9/P6B+Y+uamm/47Zb1F0zpqnp025WK1p+kHp5158Wdxz/0MEQG8cQ2e5d290zvafuYkp87e6776la9VgbcvkMvvD5iZj3vQWxhvrGWad7uxYf/MeeyktOwM4//3FevGLkf2rqxj7tebHpnFs19WPqceedMzHu8vEA44j4sWsikdhjjud98Pb+1+diiIx9JuJ/ed4KgsKmmtr62bV1Y0DEYREUXY7l4L3D7yLR348bbrzJlE7FFKQCMskECmGwatK116+8qBHo7T2zsSJeOXs0VRbHdsGIvJDSoKBEsWnzIcIQUgpIIUx1isXjuoda8c6BNx68aAKe2rD2Nps794+qrgY4gxQShqCUBNNTIOZHYbsuhCZP67K4riTgxaLglrNh39/33HtRBNicPxIfWcF0zYdS9BEwgJ5LQzidHkAuky0+V0BxXei5UPq8YIRf7N3zUmVZW4kfrV1Rz237i64fNd6WBAFtSsOQZRZHf7If6UwKUsIQN88ZADOHFqDTLhIGoY7CT8oWASnwTcu2ecQjAQowqcOEIS6VNCPAkRxIIJ/Lw+KspGSwkvaamTtwzC5rCoVS3G7bFgjnlrIiMcdx0Hf6DPL5LLjug4wIVvJiDjNymjFr4rbnn5lcxj2gruO2A6XYWU6MWSYlPM9DvCKO073deG33y9i37y0UwgKtVSASjZpeybaskjcz0+gJhm+URUDr8sX0fjtuMxvgMO2x7/uoINKZTBq7X30VbY+uRsuyh2GTyGQigflz56B1xTI8+8wWvHPoIMJQmFLqkBjOmTkflBCNZdnERH50NBJh2pO+58H1fOzY8QL+9uYb6OrqND/WxzY24qorrzKppOgSQhghe/fuxiuv7DQC6upq0TzvATTQiZ3JpkGndF1ZTuLvzvnWMt+NrqkaXYUaOn0//ODfOHnyuE4dk0K0uWEVfz4WW2otxABg+hcYpDStNXzfw003T0E6nUEmleo53P7upM2b/9B1wQRMveXLV1eNqT3c3dNHHvMQIQLRaNQQ4dwa/DdOmZkZi6bFDM6LpVaEwkSHBJmCwC3+xNObn108ZAJWr17NTpw4wY8dO8a7urp4IpF0b/jSpCncsccFucDNBXmfehxfCOkByge4xxgIzGHMor1ClGxOH4vRftCVSTqOLSj9hO+7wnPdkFIwpHXle37uN1uea2tvb++rra0JJ0yYIMaPHy+bmppEa2ur+p8CmpubWV9fH+vu7uY9PT2sv7+fZ7NZFgQB10bp4dDcyeVyDgCX4BO8ktEmOASrCF7iIEWQRYRFBEXkCTk9Ms6DWDQa0nvyhAIASWJVJBKRo0aNUnV1dbK+vl7W1NSoTZs2qU+UQitXruSpVMrq7Oy0Ojo6+OnTpy2KhiWldIQQDo2WIV+EUooTGADOGOPF9BF6oHsNUSIi5JwbUCoWNDkiGTY0NGiiITlQrl+/Xn2mKvTRRx8pEqDI84JMaVA0RDKZ1PdBqcdLwD4WYVUcZXEuSkFlWI0YMUIKISR5XhFx/f1UmiuGZhMvWLCAp9NpPjAwYFIrkUgwEqDvQeIYgUspMUi+iEFTHxdBVUvF43EDIqoqKysliVCUKmaMxWJy3bp1asiq0MKFCxmVQJbJZLgei8QZRQYEpkHe0zhbWQhny6ht2waU0yjmtSLP6xEkQguSdH9WVFtbm7og50BLS4shTRHRYhiR1dB5rsmbeRiG5r70HKC0UwQtQpEAvaaKorS39ZrS+V7u/4UM1q5dy/TBpFEiCKUCOOdGBBE2jZ4WsXTpUoX/axvGMIYxbP8FoGNz7Ytk/FIAAAAASUVORK5CYII=';\n    this.localFunctions = {\n      // $(function(){});\n      ready: function ready(fn) {\n        if (document.attachEvent ? document.readyState === \"complete\" : document.readyState !== \"loading\") {\n          fn();\n        } else {\n          document.addEventListener('DOMContentLoaded', fn);\n        }\n      },\n      removeClass: function removeClass(el, className) {\n        if (el.classList) el.classList.remove(className);else el.className = el.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\n      },\n      addClass: function addClass(el, className) {\n        if (el.classList) el.classList.add(className);else el.className += ' ' + className;\n      },\n      hasClass: function hasClass(el, className) {\n        if (el.classList) return el.classList.contains(className);else return new RegExp('(^| )' + className + '( |$)', 'gi').test(el.className);\n      }\n    };\n\n    for (var prop in defaults) {\n      if (!defaults.hasOwnProperty(prop)) continue;\n      this[prop] = params.hasOwnProperty(prop) ? params[prop] : defaults[prop];\n    }\n\n    this.actionState = false; // находится ли попап в процессе открытия/закрытия\n\n    this.isActive = false; // открыт ли сейчас какой-либо попап\n\n    this.isLoading = false; // открыт ли сейчас какой-либо попап\n\n    this.delayedLoading = null; // индикатор таймаута на запуск статуса загрузки\n\n    this.closeAfterDelay = false; // требуется ли закрыть попап после завершения периода задержки\n\n    this.defaultLoadingPic = this.loadingPic && typeof this.loadingPic === 'string' ? this.loadingPic : defaultLoadingPic; // картинка загрузки, используемая по умолчанию\n\n    this.scrollTop = null;\n    StyleSheet = document.querySelector('style[title=\"' + titleHashBase + '\"]');\n    if (params.hasOwnProperty('styleSheetTitle') && params.styleSheetTitle === titleHashBase) specialHashInit = true; // если это не базовый автовызов - почистить таблицу стилей\n\n    if (!specialHashInit && StyleSheet) StyleSheet.innerHTML = '';\n    var templates = {\n      message: '<div class=\"easy-popup\" data-name=\"message\">' + '<div class=\"easy-popup__closer\">' + '<div></div>' + '<div></div>' + '</div>' + '<div class=\"easy-popup__heading\"></div>' + '<div class=\"easy-popup__body\">' + '<div class=\"easy-popup__text\"></div>' + '<div class=\"button_wrapper\">' + '<button class=\"closing_button\" id=\"close_btn\">ОК</button>' + '</div>' + '</div>' + '</div>',\n      confirm: '<div class=\"easy-popup\" data-name=\"confirm\">' + '<div class=\"easy-popup__closer\">' + '<div></div>' + '<div></div>' + '</div>' + '<div class=\"easy-popup__heading\"></div>' + '<div class=\"easy-popup__body\">' + '<div class=\"easy-popup__text\"></div>' + '<div class=\"button_wrapper\">' + '<button class=\"confirm_button\">Принять</button>' + '<button class=\"closing_button\">Отклонить</button>' + '</div>' + '</div>' + '</div>'\n    };\n\n    if (_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(params.templates) === 'object') {\n      for (var customTemplate in params.templates) {\n        if (!params.templates.hasOwnProperty(customTemplate)) continue;\n        templates[customTemplate] = params.templates[customTemplate];\n      }\n    } // $(function(){});\n\n\n    this.localFunctions.ready(function () {\n      var popupSelector = _this.appendTo ? _this.appendTo : defaultPopupParent,\n          popupParent = document.querySelector(popupSelector),\n          popupTint = document.querySelector(popupSelector + ' > .easy-popup-tint');\n      if (popupTint) popupTint.dataset.id = _this.id;else popupParent.innerHTML += '<div class=\"easy-popup-tint\" data-id=\"' + _this.id + '\"></div>';\n      var html = '';\n\n      for (var name in templates) {\n        if (!templates.hasOwnProperty(name)) continue;\n\n        if (templates[name] === false) {\n          delete templates[name];\n          var popupItem = document.querySelectorAll('.easy-popup-tint[data-id=\"' + _this.id + '\"] .easy-popup[data-name=\"' + name + '\"]');\n\n          if (popupItem.length) {\n            //popupItem.remove();\n            Array.prototype.forEach.call(popupItem, function (node) {\n              node.parentNode.removeChild(node);\n            });\n          }\n\n          continue;\n        }\n\n        if (!document.querySelectorAll('.easy-popup-tint[data-id=\"' + _this.id + '\"] .easy-popup[data-name=\"' + name + '\"]').length) html += templates[name];\n      }\n\n      if (!document.querySelector('.easy-popup-tint[data-id=\"' + _this.id + '\"] .easy-popup__loading')) html += '<div class=\"easy-popup__loading\"></div>'; //$('.easy-popup-tint').append(html);\n\n      document.querySelector('.easy-popup-tint[data-id=\"' + _this.id + '\"]').innerHTML += html; //$('.easy-popup').hide(); // по умолчанию у попапов display inline-block, поэтому нужно скрыть\n\n      Array.prototype.forEach.call(document.querySelectorAll('.easy-popup'), function (node) {\n        node.style.display = 'none';\n      });\n\n      if (navigator.platform.indexOf('iPad') !== -1 || navigator.platform.indexOf('iPhone') !== -1) {\n        if (['object', 'string'].includes(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(_this.hideOnIos))) {\n          _this.localFunctions.addClass(document.body, 'easy-popup_ios');\n\n          _this.localFunctions.addClass(document.querySelector('html'), 'easy-popup_ios');\n\n          var hideArr = typeof _this.hideOnIos == 'string' ? _this.hideOnIos.split(',') : _this.hideOnIos;\n          document.querySelector('head').innerHTML += '<style title=\"' + titleHashBase + '_overflow\"></style>';\n\n          var _StyleSheet = document.querySelector('style[title=\"' + titleHashBase + '_overflow\"]');\n\n          hideArr.forEach(function (v, i, arr) {\n            _StyleSheet.innerHTML += ' .easy-popup_body-open ' + v + ' {display: none} ';\n          });\n        }\n      }\n    });\n\n    if (this.styles && !(specialHashInit && StyleSheet)) {\n      if (_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(this.styles) !== 'object') this.styles = {};\n      /*\r\n      * ШАГ 1:\r\n      * Объект scriptStyles содержит дефолтные стили для попапа, объект scriptMediaStyles - дефолтные медиазапросы. Объект this.styles дополняет объект scriptStyles (а объект this.mediaStyles дополняет объект scriptMediaStyles): если указанного селектора нет - он добавляется, если есть - то его объект CSS-стилей дополняется стилями из объекта this.styles (по соответствующему селектору), при этом если в значении одного из свойств указано false - данное свойство удаляется. Аналогичным образом, если в объекте this.styles передан селектор со значением false, то этот селектор удаляется из объекта scriptStyles.\r\n      * */\n\n      var scriptStyles = {\n        '.easy-popup-tint': {\n          position: 'fixed',\n          display: 'none',\n          width: '100%',\n          height: '100vh !important',\n          overflowY: 'auto',\n          overflowX: 'hidden',\n          background: 'RGBA(0,0,0,0.7)',\n          zIndex: 10000,\n          left: 0,\n          right: 0,\n          top: 0,\n          bottom: 0,\n          textAlign: 'center',\n          verticalAlign: 'middle'\n        },\n        '.easy-popup_ios .easy-popup-tint': {\n          position: 'relative',\n          height: 'auto !important',\n          pointerEvents: 'auto'\n        },\n        '.easy-popup-tint::after': {\n          display: 'inline-block',\n          height: '100%',\n          content: '',\n          verticalAlign: 'middle'\n        },\n        '.easy-popup__loading': {\n          visibility: 'hidden',\n          position: 'fixed',\n          width: '100vw',\n          height: '100vh',\n          zIndex: '-1',\n          top: '0',\n          left: '0',\n          transition: 'all 150ms',\n          background: 'url(' + this.defaultLoadingPic + ') center center / 50px no-repeat rgba(255, 255, 255, 0.7)'\n        },\n        '.easy-popup-tint.is_loading .easy-popup__loading': {\n          visibility: 'visible',\n          zIndex: '10001'\n        },\n        'body .easy-popup-tint': {\n          // ios scroll fix\n          WebkitOverflowScrolling: 'touch',\n          overflowScrolling: 'touch'\n        },\n        '.easy-popup': {\n          position: 'relative',\n          display: 'inline-block',\n          background: '#fff',\n          width: 'calc(100% - 20px)',\n          maxWidth: '550px',\n          minHeight: '130px',\n          margin: '50px 10px',\n          borderRadius: '10px',\n          verticalAlign: 'middle',\n          overflow: 'hidden',\n          boxShadow: '0 0 15px #fff',\n          WebkitTransform: 'translateZ(0px)'\n        },\n        '.easy-popup__heading': {\n          height: '43px',\n          background: '#34991b',\n          font: 'bold 30px/45px Arial',\n          color: '#fff',\n          textAlign: 'center',\n          textTransform: 'uppercase',\n          padding: '0 17px',\n          margin: 'auto'\n        },\n        '.easy-popup__body': {\n          padding: '12px 17px 27px'\n        },\n        '.easy-popup__closer': {\n          position: 'absolute',\n          width: '25px',\n          height: '25px',\n          right: '5px',\n          top: '8px',\n          cursor: 'pointer',\n          transition: 'all 280ms'\n        },\n        '.easy-popup__closer > div': {\n          position: 'absolute',\n          left: '11px',\n          width: '3px',\n          height: '25px',\n          background: '#fff',\n          borderRadius: '3px',\n          transition: 'all 280ms'\n        },\n        '.easy-popup__closer > div:nth-child(1)': {\n          WebkitTransform: 'rotate(45deg)',\n          transform: 'rotate(45deg)'\n        },\n        '.easy-popup__closer > div:nth-child(2)': {\n          WebkitTransform: 'rotate(-45deg)',\n          transform: 'rotate(-45deg)'\n        },\n        '.easy-popup__closer:hover': {\n          WebkitTransform: 'scale3d(1.3, 1.3, 0.2)',\n          transform: 'scale3d(1.3, 1.3, 0.2)'\n        },\n        '.easy-popup__closer:hover > div': {\n          background: '#9cd1d4'\n        },\n        '.easy-popup button, .easy-popup input[type=\"submit\"]': {\n          display: 'inline-block',\n          margin: 'auto',\n          background: '#34991b',\n          borderRadius: '6px',\n          font: 'bold 18px Tahoma',\n          color: '#fff',\n          height: '35px',\n          padding: '0 35px',\n          cursor: 'pointer',\n          transition: 'all 250ms',\n          border: 'none'\n        },\n        '.easy-popup button:hover, .easy-popup input[type=\"submit\"]:hover': {\n          opacity: 0.7\n        },\n        '.easy-popup__body .closing_button': {\n          marginTop: '10px'\n        },\n        '.easy-popup__text': {\n          marginBottom: '16px',\n          textAlign: 'center'\n        },\n        '.easy-popup .input_wrapper': {\n          marginBottom: '10px'\n        },\n        '.easy-popup .button_wrapper button': {\n          display: 'inline-block',\n          marginLeft: '10px',\n          marginRight: '10px'\n        },\n        '.easy-popup-tint input, .easy-popup-tint button': {\n          WebkitTransform: 'translateZ(0px)'\n        },\n        'body.easy-popup_overflow, html.easy-popup_overflow': {\n          overflow: 'hidden !important',\n          height: '100vh',\n          width: '100%',\n          position: 'fixed'\n        },\n        'body.easy-popup_overflow.easy-popup_ios, html.easy-popup_overflow.easy-popup_ios': {\n          height: 'auto',\n          position: 'relative',\n          pointerEvents: 'none'\n        },\n        'body.easy-popup_overflow.easy-popup_ios > div[style]:not([class]), html.easy-popup_overflow.easy-popup_ios > div[style]:not([class])': {\n          pointerEvents: 'auto'\n        }\n      };\n      var scriptMediaStyles = {\n        '@keyframes easyPopupShow': {\n          'from': {\n            opacity: 0,\n            transform: 'scale3d(0.3, 0.3, 0.3)',\n            WebkitTransform: 'scale3d(0.3, 0.3, 0.3)'\n          },\n          '90%': {\n            opacity: 1\n          }\n        },\n        '@-webkit-keyframes easyPopupShow': {\n          'from': {\n            opacity: 0,\n            transform: 'scale3d(0.3, 0.3, 0.3)',\n            WebkitTransform: 'scale3d(0.3, 0.3, 0.3)'\n          },\n          '90%': {\n            opacity: 1\n          }\n        },\n        '@keyframes easyPopupClose': {\n          'from': {\n            opacity: 1\n          },\n          '90%': {\n            opacity: 0,\n            transform: 'scale3d(0.3, 0.3, 0.3)',\n            WebkitTransform: 'scale3d(0.3, 0.3, 0.3)'\n          },\n          'to': {\n            opacity: 0\n          }\n        },\n        '@-webkit-keyframes easyPopupClose': {\n          'from': {\n            opacity: 1\n          },\n          '90%': {\n            opacity: 0,\n            transform: 'scale3d(0.3, 0.3, 0.3)',\n            WebkitTransform: 'scale3d(0.3, 0.3, 0.3)'\n          },\n          'to': {\n            opacity: 0\n          }\n        }\n      };\n\n      if (this.replaceStyles) {\n        //scriptStyles = $.extend(scriptStyles, this.styles);\n        for (var prop1 in this.styles) {\n          if (!this.styles.hasOwnProperty(prop1)) continue;\n          scriptStyles[prop1] = this.styles[prop1];\n        }\n      } else {\n        scriptStyles = styleHandler.processObj(scriptStyles, this.styles);\n      }\n\n      if (this.mediaStyles !== false) {\n        if (_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(this.mediaStyles) !== 'object') this.mediaStyles = {};\n\n        for (var mediaQuery in this.mediaStyles) {\n          if (!this.mediaStyles.hasOwnProperty(mediaQuery)) continue;\n          mediaQuery = mediaQuery.trim().replace(/\\s+/g, ' ');\n\n          if (this.mediaStyles[mediaQuery] === false) {\n            delete scriptMediaStyles[mediaQuery];\n            continue;\n          }\n\n          if (!scriptMediaStyles.hasOwnProperty(mediaQuery)) {\n            scriptMediaStyles[mediaQuery] = this.mediaStyles[mediaQuery];\n            continue;\n          }\n\n          if (this.replaceStyles) {\n            //scriptMediaStyles[mediaQuery] = $.extend(scriptMediaStyles[mediaQuery], this.mediaStyles[mediaQuery]);\n            for (var prop2 in this.mediaStyles[mediaQuery]) {\n              if (!this.mediaStyles[mediaQuery].hasOwnProperty(prop2)) continue;\n              scriptMediaStyles[mediaQuery][prop2] = this.mediaStyles[mediaQuery][prop2];\n            }\n          } else {\n            scriptMediaStyles[mediaQuery] = styleHandler.processObj(scriptMediaStyles[mediaQuery], this.mediaStyles[mediaQuery]);\n          }\n        }\n      }\n      /*\r\n      * ШАГ 2:\r\n      * Если в DOM ещё не создана таблица стилей (тег style) данным скриптом, то она создаётся.\r\n      * Берётся объект scriptStyles, и каждый его селектор с соответствующим объектом CSS-стилей преобразуются в необходимый формат и записываются в созданную таблицу стилей. То же самое делается для каждой строки медиазапроса в объекте scriptMediaStyles.\r\n      * */\n\n\n      if (!StyleSheet) {\n        //$('head').append('<style title=\"'+titleHashBase+'\"></style>');\n        document.querySelector('head').innerHTML += '<style title=\"' + titleHashBase + '\"></style>';\n        StyleSheet = document.querySelector('style[title=\"' + titleHashBase + '\"]');\n      }\n\n      for (var selector in scriptStyles) {\n        if (!scriptStyles.hasOwnProperty(selector)) continue;\n        selector = selector.trim().replace(/\\s+/g, ' ');\n        var selectorContent = styleHandler.objToCSS(scriptStyles[selector]);\n        StyleSheet.innerHTML += selector + \"{\" + selectorContent + \"}\";\n      }\n\n      if (this.mediaStyles !== false) {\n        for (var mediaString in scriptMediaStyles) {\n          if (!scriptMediaStyles.hasOwnProperty(mediaString)) continue;\n          var mediaHTML = '';\n\n          for (var mediaSelector in scriptMediaStyles[mediaString]) {\n            if (!scriptMediaStyles[mediaString].hasOwnProperty(mediaSelector)) continue;\n            mediaSelector = mediaSelector.trim().replace(/\\s+/g, ' ');\n            var mediaSelectorContent = styleHandler.objToCSS(scriptMediaStyles[mediaString][mediaSelector]);\n            mediaHTML += mediaSelector + \"{\" + mediaSelectorContent + \"}\";\n          }\n\n          StyleSheet.innerHTML += mediaString + \"{\" + mediaHTML + \"}\";\n        }\n      }\n    }\n  }\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(EasyPopup, [{\n    key: \"show\",\n    value: function show() {\n      var _this2 = this;\n\n      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      // если какое-то действие ещё не отработало - сразу выходим\n      if (this.actionState) return this; // если были активные элементы - запоминаем и делаем неактивными\n\n      var elemsWithFocus = document.querySelector(':focus');\n\n      if (elemsWithFocus) {\n        // сохраняем элемент, на которым был фокус глобально\n        window.a3e95e180cc04c9d85ffdd8ebecef047 = elemsWithFocus;\n        elemsWithFocus.blur();\n      }\n\n      var showParams = {\n        title: 'Ошибка',\n        // заголовок попапа\n        text: 'Произошла ошибка всплывающего окна. Пожалуйста, обратитесь в обратную связь.',\n        // текст попапа\n        btnEvents: true,\n        // включить/отключить события при клике на кнопки .closing_button и .confirm_button\n        name: 'message',\n        // имя попапа, который вызывается (атрибут data-name)\n        html: false,\n        // применить HTML-шаблон, если он передан (игнорируя title, text и name)\n        closerCallback: function closerCallback() {},\n        closingBtnCallback: false,\n        // если на .closing_button нужно повесить отдельный callback - передать сюда\n        confirmBtnCallback: function confirmBtnCallback() {},\n        // если на .confirm_button нужно повесить отдельный callback - передать сюда\n        backgroundClickCallback: false,\n        // если при клике на .easy-popup-tint (фон) нужен отдельный callback - передать сюда\n        callbackOnEsc: false,\n        // если при нажатии Esc нужен отдельный callback - передать сюда\n        callbackOnEnter: false,\n        // если при нажатии Enter нужен отдельный callback - передать сюда,\n        closingBtnText: false,\n        confirmBtnText: false,\n        animationShow: false,\n        animationClose: false,\n        speed: false,\n        closingSpeed: false\n      },\n          Popup = this,\n          scrollingElement = document.scrollingElement || document.documentElement,\n          // элемент, отвечающий за прокрутку документа\n      elem;\n\n      for (var prop in showParams) {\n        if (!showParams.hasOwnProperty(prop)) continue;\n        if (params.hasOwnProperty(prop)) showParams[prop] = params[prop];\n      } // если заданы параметры скорости показа или закрытия попапа - используем их, иначе используем скорость попапа, указанную в объекте по умолчанию\n\n\n      var closeSpeed = showParams.closingSpeed !== false ? showParams.closingSpeed : this.speed,\n          showSpeed = showParams.speed !== false ? showParams.speed : this.speed; // смотрим, есть ли уже открытые (активные) попапы\n\n      var activePopups = document.querySelectorAll('.easy-popup.active');\n\n      if (activePopups.length) {\n        var animationNameOut = showParams.animationClose && typeof showParams.animationClose === 'string' ? showParams.animationClose : this.defaultAnimationClose,\n            animationStringOut = closeSpeed + 'ms ' + animationNameOut + ' 1 linear';\n        Array.prototype.forEach.call(activePopups, function (node) {\n          _this2.localFunctions.removeClass(node, 'active');\n\n          node.style.WebkitAnimation = animationStringOut;\n          node.style.animation = animationStringOut;\n        });\n\n        var displayNoneCallback = function displayNoneCallback() {\n          // всем попапам ставим display none и запускаем метод show снова, с теми же параметрами\n          Array.prototype.forEach.call(document.querySelectorAll('.easy-popup'), function (node) {\n            node.style.display = 'none';\n          });\n\n          _this2.show(showParams);\n        };\n\n        if (closeSpeed) setTimeout(displayNoneCallback, closeSpeed);else displayNoneCallback();\n        return this;\n      } // если имя попапа === false - нужно только показать тинт, а дальнейшая обработка не требуется\n\n\n      if (showParams.name === false) {\n        // отображение попапа (а точнее, тинта)\n        var tintOnly = document.querySelector('.easy-popup-tint[data-id=\"' + this.id + '\"]');\n        tintOnly.style.display = 'block';\n        this.localFunctions.addClass(tintOnly, 'active');\n        this.isActive = true;\n        return this;\n      }\n\n      elem = document.querySelector('.easy-popup-tint[data-id=\"' + this.id + '\"] .easy-popup[data-name=\"' + showParams.name + '\"]');\n      if (!elem) elem = document.querySelector('.easy-popup-tint[data-id=\"' + this.id + '\"] .easy-popup[data-name=\"' + (showParams.name = 'message') + '\"]');\n      if (!elem) elem = document.querySelector('.easy-popup-tint[data-id=\"' + this.id + '\"] .easy-popup:first-child'); // вставка контента в попап\n\n      if (showParams.title !== false) {\n        var popupHeading = elem.querySelector('.easy-popup__heading');\n        if (popupHeading) popupHeading.innerHTML = showParams.title;\n      }\n\n      if (showParams.html) {\n        var popupBody = elem.querySelector('.easy-popup__body');\n        if (popupBody) popupBody.innerHTML = showParams.html;\n      } else {\n        if (showParams.text !== false) {\n          var popupText = elem.querySelector('.easy-popup__text');\n          if (popupText) popupText.innerHTML = showParams.text;\n        }\n      } // текст кнопок\n\n\n      var popupClosingButton = elem.querySelector('.closing_button'),\n          popupConfirmButton = elem.querySelector('.confirm_button');\n\n      if (popupClosingButton) {\n        if (showParams.closingBtnText !== false) {\n          popupClosingButton.innerHTML = showParams.closingBtnText;\n        } else {\n          if (showParams.name === 'confirm') popupClosingButton.innerHTML = 'Отклонить';else if (showParams.name === 'message') popupClosingButton.innerHTML = 'ОК';\n        }\n      }\n\n      if (popupConfirmButton) {\n        if (showParams.confirmBtnText !== false) popupConfirmButton.innerHTML = showParams.confirmBtnText;else {\n          if (showParams.name === 'confirm') popupConfirmButton.innerHTML = 'Подтвердить';\n        }\n      } // ставим scrollTop, но только если это не замена одного попапа другим\n\n\n      if (!this.isActive) this.scrollTop = scrollingElement.scrollTop; // отображение попапа\n\n      var tint = document.querySelector('.easy-popup-tint[data-id=\"' + this.id + '\"]');\n      tint.style.display = 'block';\n      this.localFunctions.addClass(tint, 'active');\n      this.isActive = true;\n      var bodyEl = document.body,\n          htmlEl = document.querySelector('html');\n      this.localFunctions.addClass(htmlEl, 'easy-popup_body-open');\n      this.localFunctions.addClass(bodyEl, 'easy-popup_body-open'); // если не отключена автопрокрутка\n\n      if (!this.noScrollTop) {\n        var className = 'easy-popup_overflow';\n        this.localFunctions.addClass(htmlEl, className);\n        this.localFunctions.addClass(bodyEl, className); // добавляем блокатор скролла, только если это не ios\n\n        if (navigator.platform.indexOf('iPad') === -1 && navigator.platform.indexOf('iPhone') === -1) {\n          bodyEl.scrollTop = this.scrollTop;\n        }\n      }\n\n      if (!this.localFunctions.hasClass(elem, 'active')) {\n        elem.style.display = 'inline-block';\n        this.localFunctions.addClass(elem, 'active');\n        var animationNameIn = showParams.animationShow && typeof showParams.animationShow === 'string' ? showParams.animationShow : this.defaultAnimationShow,\n            animationStringIn = showSpeed + 'ms ' + animationNameIn + ' 1 linear';\n        elem.style.WebkitAnimation = animationStringIn;\n        elem.style.animation = animationStringIn;\n      }\n\n      var closingBtn = elem.querySelector('.closing_button'),\n          confirmBtn = elem.querySelector('.confirm_button'),\n          popupCloser = elem.querySelector('.easy-popup__closer'); // если есть неснятые события от предыдущего попапа - снять их\n\n      if (this.hasOwnProperty('keydownCallbackEsc')) {\n        document.removeEventListener('keydown', this.keydownCallbackEsc);\n        delete this.keydownCallbackEsc;\n      }\n\n      if (this.hasOwnProperty('keydownCallbackEnter')) {\n        document.removeEventListener('keydown', this.keydownCallbackEnter);\n        delete this.keydownCallbackEnter;\n      }\n\n      if (closingBtn && this.hasOwnProperty('closingBtnCallback')) {\n        closingBtn.removeEventListener('click', this.closingBtnCallback, {\n          once: true\n        });\n        delete this.closingBtnCallback;\n      }\n\n      if (confirmBtn && this.hasOwnProperty('confirmBtnCallback')) {\n        confirmBtn.removeEventListener('click', this.confirmBtnCallback, {\n          once: true\n        });\n        delete this.confirmBtnCallback;\n      }\n\n      if (tint && this.hasOwnProperty('tintCallback')) {\n        tint.removeEventListener('click', this.tintCallback, {\n          once: true\n        });\n        delete this.tintCallback;\n      }\n\n      if (popupCloser && this.hasOwnProperty('closerCallbackMain')) {\n        popupCloser.removeEventListener('click', this.closerCallbackMain, {\n          once: true\n        });\n        delete this.closerCallbackMain;\n      }\n\n      this.closerCallbackMain = function () {\n        if (_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(showParams.closerCallback) !== 'object' || !showParams.closerCallback.hasOwnProperty('closerOff') || showParams.closerCallback.closerOff !== true) {\n          if (Popup.actionState) return false; // базовый callback, который происходит при нажатии на .easy-popup__closer\n\n          Popup.close();\n        }\n\n        if (typeof showParams.closerCallback === 'function') showParams.closerCallback();else if (_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(showParams.closerCallback) === 'object' && showParams.closerCallback.hasOwnProperty('callback') && typeof showParams.closerCallback.callback === 'function') showParams.closerCallback.callback();\n        if (popupCloser) popupCloser.removeEventListener('click', Popup.closerCallbackMain);\n      }; // событие на клоузер - вешаем коллбек, который отработает только один раз (в конце он удаляет сам себя)\n\n\n      if (popupCloser) popupCloser.addEventListener('click', this.closerCallbackMain, {\n        once: true\n      }); // если события на кнопки не отключены\n\n      if (showParams.btnEvents) {\n        if (closingBtn) {\n          this.closingBtnCallback = showParams.closingBtnCallback ? function closing() {\n            showParams.closingBtnCallback();\n            this.removeEventListener('click', closing);\n          } : this.closerCallbackMain;\n          closingBtn.addEventListener('click', this.closingBtnCallback, {\n            once: true\n          });\n        }\n\n        if (confirmBtn) {\n          this.confirmBtnCallback = showParams.confirmBtnCallback ? function confirm() {\n            showParams.confirmBtnCallback();\n            this.removeEventListener('click', confirm);\n          } : this.closerCallbackMain;\n          confirmBtn.addEventListener('click', this.confirmBtnCallback, {\n            once: true\n          });\n        }\n      } // если включено закрытие попапа по клику на фон\n\n\n      if (this.allowBackgroundCallback) {\n        this.tintCallback = function (e) {\n          if (!_this2.localFunctions.hasClass(e.target, 'easy-popup-tint')) return;\n          if (!e.target.hasAttribute('data-id') || e.target.getAttribute('data-id') != Popup.id) return;\n          if (Popup.isLoading) return;\n          (showParams.backgroundClickCallback ? showParams.backgroundClickCallback : Popup.closerCallbackMain)();\n\n          _this2.removeEventListener('click', Popup.tintCallback, {\n            once: true\n          });\n        };\n\n        tint.addEventListener('click', this.tintCallback);\n      }\n\n      this.actionState = true;\n\n      var showCompletedCallback = function showCompletedCallback() {\n        _this2.actionState = false; // если включено закрытие попапа при нажатии Esc или подтверждение при нажатии Enter // запускать только по таймауту, иначе глюк события - отключается раньше полного появления попапа, при этом метод close блокируется, т.к. открытие попапа ещё не завершилось =)\n\n        if (_this2.allowCallbackOnEsc) {\n          // callback для Esc\n          _this2.keydownCallbackEsc = function (e) {\n            if (!Popup.isActive || Popup.isLoading) {\n              document.removeEventListener('keydown', Popup.keydownCallbackEsc);\n              return false;\n            } //$._data(document, \"events\"); // проверка эвентов на jQuery\n\n\n            var keyCode = e.hasOwnProperty('keyCode') ? e.keyCode : e.which;\n\n            if (Popup.allowCallbackOnEsc && keyCode === 27) {\n              (showParams.callbackOnEsc ? showParams.callbackOnEsc : Popup.closerCallbackMain)();\n              document.removeEventListener('keydown', Popup.keydownCallbackEsc);\n            }\n          };\n\n          document.addEventListener('keydown', _this2.keydownCallbackEsc);\n        }\n\n        if (_this2.allowCallbackOnEnter) {\n          // callback для Enter\n          _this2.keydownCallbackEnter = function (e) {\n            if (!Popup.isActive || Popup.isLoading) {\n              document.removeEventListener('keydown', Popup.keydownCallbackEnter);\n              return false;\n            } //$._data(document, \"events\"); // проверка эвентов на jQuery\n\n\n            var keyCode = e.hasOwnProperty('keyCode') ? e.keyCode : e.which;\n\n            if (Popup.allowCallbackOnEnter && keyCode === 13) {\n              (showParams.callbackOnEnter ? showParams.callbackOnEnter : showParams.confirmBtnCallback ? showParams.confirmBtnCallback : Popup.closerCallbackMain)();\n              document.removeEventListener('keydown', Popup.keydownCallbackEnter);\n            }\n          };\n\n          document.addEventListener('keydown', _this2.keydownCallbackEnter);\n        }\n      };\n\n      if (showSpeed) setTimeout(showCompletedCallback, showSpeed);else showCompletedCallback();\n      return this;\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      var _this3 = this;\n\n      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      // если какое-то действие ещё не отработало - сразу выходим\n      if (this.actionState) return this;\n      /*\r\n      принимает объект с параметрами:\r\n      callback: function (callback, который выполнится перед закрытием),\r\n      stopAfterCallback: boolean (если имеет значение true, скрипт прерывается после вызова коллбека),\r\n      animationClose: string (имя анимации, которую применить при закрытии попапа)\r\n      closeSpeed: number (скорость анимации закрытия)\r\n      */\n\n      var closeParams = {\n        callback: false,\n        stopAfterCallback: false,\n        animationClose: false,\n        speed: false\n      };\n\n      for (var prop in closeParams) {\n        if (!closeParams.hasOwnProperty(prop)) continue;\n        if (params.hasOwnProperty(prop)) closeParams[prop] = params[prop];\n      } // если был передан callback - выполнить его\n\n\n      if (typeof closeParams.callback === 'function') closeParams.callback(); // если stopAfterCallback было передано true - прервать скрипт\n\n      if (closeParams.stopAfterCallback === true) return this; // если задан параметр скорости закрытия попапа - используем его, иначе используем скорость попапа, указанную в объекте по умолчанию\n\n      var closeSpeed = closeParams.speed !== false ? closeParams.speed : this.speed;\n      var activePopups = document.querySelectorAll('.easy-popup.active');\n\n      if (activePopups.length) {\n        var animationNameOut = closeParams.animationClose && typeof closeParams.animationClose === 'string' ? closeParams.animationClose : this.defaultAnimationClose,\n            animationStringOut = closeSpeed + 'ms ' + animationNameOut + ' 1 linear';\n        Array.prototype.forEach.call(activePopups, function (node) {\n          _this3.localFunctions.removeClass(node, 'active');\n\n          node.style.WebkitAnimation = animationStringOut;\n          node.style.animation = animationStringOut;\n        });\n\n        var displayNoneCallback = function displayNoneCallback() {\n          // всем попапам ставим display none\n          Array.prototype.forEach.call(document.querySelectorAll('.easy-popup'), function (node) {\n            node.style.display = 'none';\n          });\n        };\n\n        if (closeSpeed) setTimeout(displayNoneCallback, closeSpeed);else displayNoneCallback();\n      }\n\n      var htmlElem = document.querySelector('html'),\n          bodyElem = document.body;\n      this.localFunctions.removeClass(htmlElem, 'easy-popup_body-open');\n      this.localFunctions.removeClass(bodyElem, 'easy-popup_body-open'); // если не отключена автопрокрутка\n\n      if (!this.noScrollTop) {\n        var scrollingElement = document.scrollingElement || document.documentElement,\n            classToRemove = 'easy-popup_overflow';\n        this.localFunctions.removeClass(htmlElem, classToRemove);\n        this.localFunctions.removeClass(bodyElem, classToRemove);\n        document.querySelector('body').scrollTop = 0;\n        scrollingElement.scrollTop = this.scrollTop;\n      }\n\n      var closeCompleteCallback = function closeCompleteCallback() {\n        //$('html, body').stop(true);\n        var tint = document.querySelector('.easy-popup-tint[data-id=\"' + _this3.id + '\"]');\n        tint.style.display = 'none';\n\n        _this3.localFunctions.removeClass(tint, 'active');\n\n        _this3.isActive = false; // проверяем, задана ли глобальная переменная с jQuery-объектом, на котором до этого был фокус\n\n        if (_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(window.a3e95e180cc04c9d85ffdd8ebecef047) === 'object') {\n          window.a3e95e180cc04c9d85ffdd8ebecef047.focus();\n          delete window.a3e95e180cc04c9d85ffdd8ebecef047;\n        }\n\n        _this3.actionState = false;\n      };\n\n      this.actionState = true;\n      if (closeSpeed) setTimeout(closeCompleteCallback, closeSpeed);else closeCompleteCallback();\n      return this;\n    }\n  }, {\n    key: \"setLoading\",\n    value: function setLoading() {\n      var _this4 = this;\n\n      var minLoadingTime = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var loadingPic = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      // добавляем класс загрузки\n      this.isLoading = true;\n      this.localFunctions.addClass(document.querySelector('.easy-popup-tint[data-id=\"' + this.id + '\"]'), 'is_loading'); // если задана картинка загрузки - ставим её на загрузку вместо стандартной крутилки (сначала проверяем - передана ли картинка напрямую в метод, потом - передана ли в конструктор)\n\n      if (!loadingPic) loadingPic = this.defaultLoadingPic;\n      document.querySelector('.easy-popup-tint[data-id=\"' + this.id + '\"] .easy-popup__loading').style.backgroundImage = 'url(\"' + loadingPic + '\")'; // получаем минимальное время загрузки\n\n      if (minLoadingTime === false || minLoadingTime === null) minLoadingTime = Math.max(this.minLoadingTime, this.speed);\n\n      var setLoadingCallback = function setLoadingCallback() {\n        // после запуска скрипта таймаута сразу почистить переменную (prevent duplicate calls)\n        _this4.delayedLoading = null; // если в течение таймаута был запрос на снятие класса загрузки из метода unsetLoading - повторно обратиться к этому методу (в этот раз он отработает, т.к. delayedLoading уже равен null)\n\n        if (_this4.closeAfterDelay) {\n          _this4.closeAfterDelay = false;\n\n          _this4.unsetLoading();\n        }\n      };\n\n      if (minLoadingTime) // установить таймаут - минимальное время, в течение которого должна отображаться анимация загрузки\n        this.delayedLoading = setTimeout(setLoadingCallback, minLoadingTime);else setLoadingCallback();\n      return this;\n    }\n  }, {\n    key: \"unsetLoading\",\n    value: function unsetLoading() {\n      // если запущен таймаут, то по истечении этого таймаута нужно спрятать индикатор загрузки\n      if (this.delayedLoading) {\n        this.closeAfterDelay = true;\n        return this;\n      } // таймаут не установлен, - значит снять класс загрузки\n\n\n      this.isLoading = false;\n      this.localFunctions.removeClass(document.querySelector('.easy-popup-tint[data-id=\"' + this.id + '\"]'), 'is_loading');\n      return this;\n    }\n  }]);\n\n  return EasyPopup;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZWFzeS1wb3B1cF9tb2R1bGUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZWFzeS1wb3B1cF9tb2R1bGUuanM/YWI0NCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBodHRwczovL2dpdGh1Yi5jb20vaW5zcGlyYXRpb24tdGVjaC9lYXN5LXBvcHVwXHJcblxyXG5leHBvcnQgY2xhc3MgRWFzeVBvcHVwIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMgPSB7fSkge1xyXG4gICAgICAgIHZhciBkZWZhdWx0cyA9IHtcclxuICAgICAgICAgICAgICAgIHNwZWVkOiAxNTAsXHJcbiAgICAgICAgICAgICAgICBzdHlsZXM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgcmVwbGFjZVN0eWxlczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBtZWRpYVN0eWxlczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZXM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBhbGxvd0JhY2tncm91bmRDYWxsYmFjazogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGFsbG93Q2FsbGJhY2tPbkVzYzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGFsbG93Q2FsbGJhY2tPbkVudGVyOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbWluTG9hZGluZ1RpbWU6IDAsXHJcbiAgICAgICAgICAgICAgICBsb2FkaW5nUGljOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIG5vU2Nyb2xsVG9wOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGRlZmF1bHRBbmltYXRpb25TaG93OiAnZWFzeVBvcHVwU2hvdycsXHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0QW5pbWF0aW9uQ2xvc2U6ICdlYXN5UG9wdXBDbG9zZScsXHJcbiAgICAgICAgICAgICAgICBpZDogKCtuZXcgRGF0ZSArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwRSsxMCkpLnRvU3RyaW5nKDM2KSxcclxuICAgICAgICAgICAgICAgIGhpZGVPbklvczogZmFsc2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGVmYXVsdFBvcHVwUGFyZW50ID0gJ2JvZHknLFxyXG4gICAgICAgICAgICB0aXRsZUhhc2hCYXNlID0gJzk1OGMxZDcyMzgwNzE4ZTVmNGI1NzYyOTlmYjVlYTBjJyxcclxuICAgICAgICAgICAgU3R5bGVTaGVldCxcclxuICAgICAgICAgICAgc3BlY2lhbEhhc2hJbml0ID0gZmFsc2UsXHJcbiAgICAgICAgICAgIHN0eWxlSGFuZGxlciA9IHtcclxuICAgICAgICAgICAgICAgIG9ialRvQ1NTOiBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaHRtbCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb2JqLmhhc093blByb3BlcnR5KHByb3ApKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9IHByb3AucmVwbGFjZSgvW0EtWl0vZywgZnVuY3Rpb24obWF0Y2gpIHtyZXR1cm4gJy0nICsgbWF0Y2gudG9Mb3dlckNhc2UoKX0pKyc6Jysob2JqW3Byb3BdICE9PSAnJyA/IG9ialtwcm9wXSA6ICdcIlwiJykrJzsnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaHRtbDtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBwcm9jZXNzT2JqOiBmdW5jdGlvbihzY3JpcHRTdHlsZU9iaiwgcGFyYW1TdHlsZU9iail7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgY3VzdG9tU2VsZWN0b3IgaW4gcGFyYW1TdHlsZU9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcmFtU3R5bGVPYmouaGFzT3duUHJvcGVydHkoY3VzdG9tU2VsZWN0b3IpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21TZWxlY3RvciA9IGN1c3RvbVNlbGVjdG9yLnRyaW0oKS5yZXBsYWNlKC9cXHMrL2csICcgJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyYW1TdHlsZU9ialtjdXN0b21TZWxlY3Rvcl0gPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgc2NyaXB0U3R5bGVPYmpbY3VzdG9tU2VsZWN0b3JdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2NyaXB0U3R5bGVPYmouaGFzT3duUHJvcGVydHkoY3VzdG9tU2VsZWN0b3IpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JpcHRTdHlsZU9ialtjdXN0b21TZWxlY3Rvcl0gPSBwYXJhbVN0eWxlT2JqW2N1c3RvbVNlbGVjdG9yXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIHBhcmFtU3R5bGVPYmpbY3VzdG9tU2VsZWN0b3JdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcmFtU3R5bGVPYmpbY3VzdG9tU2VsZWN0b3JdLmhhc093blByb3BlcnR5KHByb3ApKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcmlwdFN0eWxlT2JqW2N1c3RvbVNlbGVjdG9yXVtwcm9wXSA9IHBhcmFtU3R5bGVPYmpbY3VzdG9tU2VsZWN0b3JdW3Byb3BdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjdXN0b21Qcm9wZXJ0eSBpbiBzY3JpcHRTdHlsZU9ialtjdXN0b21TZWxlY3Rvcl0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2NyaXB0U3R5bGVPYmpbY3VzdG9tU2VsZWN0b3JdLmhhc093blByb3BlcnR5KGN1c3RvbVByb3BlcnR5KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2NyaXB0U3R5bGVPYmpbY3VzdG9tU2VsZWN0b3JdW2N1c3RvbVByb3BlcnR5XSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgc2NyaXB0U3R5bGVPYmpbY3VzdG9tU2VsZWN0b3JdW2N1c3RvbVByb3BlcnR5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzY3JpcHRTdHlsZU9iajtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGVmYXVsdExvYWRpbmdQaWMgPSAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFEQUFBQUF3Q0FZQUFBQlhBdm1IQUFBSW4wbEVRVlI0WHUxWWU0eFZ4Um4velp6bmZTd3N5ejdZWldOV2lrUk5MYVFtMk5SSGxOaW1pTVFhMG1Lc1FhbTBDNVJvS1EvTkVtQUZsTFZGYUxVUFdpSjlFQnV0S1RSb1N3VWZFTlMyOGhBZmxLVTFwangybDkyRmRlL2QrenozekV5L21keXdOL0pIUlpjTFRmWTc5NWVaTXllNTUvZjd2bSsrK2U3RnNBMWpHTU80cUdBNFQydit6cXdOUVJETXNtMUxXWllOeTdJVTV3eU1zY0V2Wk93VHZJT1pCOHJNRllOQ2dYRzI1TWRQL21vTHpzTnNuS2NkUDM3c2lteXVVT1c1SHJ5SUE4L3hZTnY4WEo1UVVPZlFMYjAzdE0yNmRrQVlTcEZKSjhkZThBaXNXdjdRaEZHaks0OWVkdGs0WFA2NWNZaEhZM0E5RW1GWmtFcEFTb0F6RHN0aTRMWU5LQTRsUXdnbElBb0NTa2tVZzBUZ0NNSUFBNGtCbkRyVisrSlhwOTQrSFdRWE5BTHBiTHJiVGJ2SXBsT0VyUEZnVUFpZ0krSjRQbHpmaDhVWWxCcU1Bck5jMkV4QjZ4RmhBYmxjRmtFK2I5eFhLSVJJWjlMSVpnYzZRWGJCQlR5KzdxZUpOYTBQWjRTUVVTa2xsRkx3UEEreDJFZ29JU0JFQ0NIVllCb1pCUUFybWZ0K0JKRklsRWhuVUFnS1lERGg2Q2lMQUFPbDlvUWluQW93dUk0THkzWVFob0VSbzZSNURwUkdBTm9rekp4eFNMcVl4VWhJRlBrZ1FFaFJDWVBnN2JJSnNHMzd1WHcrTjFVcUNjWTVoSkRnTVBsTkdQUjhpUlhKQTJDU1JnWWVNb1FzaE1VNGhCUkhac3ljOVVMWkJERE9uZzlsK0xOc0xoTlRVZ0lFYVhGQXdZZ0JOSEJXREprUnlqa3owWEpzQzByQ3BGb21tNElNNVRwOFN1UDRGUGJRc2pVWkp0VzJmQ1lOY0lia1FCSmRuU2ZOUEI2UElSTHo0WGt1SE1jMmlFUjhXbzhqbDgzaDBNRUQrTzN2Zm8yTkc1ODAreVdmejNkVTExU2IybCt1Q0JnRVFmN0JWQ281UlJTQ2hoZTNiOFhPWFMvQmMxMk1HREVTOVExajBkallpSWFHUnJNdi9uWDBDSTRlYlVjeW1ZUmxjUVQ1QVBmT25vTjBLcG1SWWZqdGE2NjdxVkMyazdnVXY5L3l5OGwxdFhVN21wcXVxRnF5NUFFb0FCYTNJS1dFRUFKbWo5REZMVTdFYlpQN2hTREE2SnBxTEYvZW1rNzI5MCtiZU8zMWU4cllTcHlMN1Z1ZnVYSnNmZU9PenA3dXBvMC9md3F1NnhKWnkzaSthSnE0RVZNb0ZGQmRYWXRGUzVZa3VjUlhycDQ0K1MxY0N2YmF6bTN1a2ZmM0wvL3I5cTJaR1YrL1ZkMTN6d3kxNlB2TmF1bWkrV3JSd3JucS92dG1xanVtMzZxZStPRWo2WVA3WDMvOHZZTnYxdUJTdEtQL1BCUTkvUDZCK1krdWFtbS80N1piMUYwenBxbnAwMjVXSzFwK2tIcDUxNThXZHh6LzBNRVFHOGNRMmU1ZDI5MHp2YWZ1WWtwODdlNjc3NmxhOVZnYmN2a012dkQ1aVpqM3ZRV3hodnJHV2FkN3V4WWYvTWVleWt0T3dNNC8vM0ZldkdMa2YycnF4ajd0ZWJIcG5GczE5V1BxY2VlZE16SHU4dkVBNDRqNHNXc2lrZGhqanVkOThQYisxK2RpaUl4OUp1Si9lZDRLZ3NLbW10cjYyYlYxWTBERVlSRVVYWTdsNEwzRDd5TFIzNDhiYnJ6SmxFN0ZGS1FDTXNrRUNtR3dhdEsxMTYrOHFCSG83VDJ6c1NKZU9YczBWUmJIZHNHSXZKRFNvS0JFc1duekljSVFVZ3BJSVV4MWlzWGp1b2RhOGM2Qk54NjhhQUtlMnJEMk5wczc5NCtxcmdZNGd4UVNocUNVQk5OVElPWkhZYnN1aENaUDY3SzRyaVRneGFMZ2xyTmgzOS8zM0h0UkJOaWNQeElmV2NGMHpZZFM5QkV3Z0o1TFF6aWRIa0F1a3kwK1YwQnhYZWk1VVBxOFlJUmY3TjN6VW1WWlc0a2ZyVjFSejIzN2k2NGZOZDZXQkFGdFNzT1FaUlpIZjdJZjZVd0tVc0lRTjg4WkFET0hGcURUTGhJR29ZN0NUOG9XQVNud1RjdTJlY1FqQVFvd3FjT0VJUzZWTkNQQWtSeElJSi9MdytLc3BHU3drdmFhbVR0d3pDNXJDb1ZTM0c3YkZnam5scklpTWNkeDBIZjZEUEw1TExqdWc0d0lWdkppRGpOeW1qRnI0cmJubjVsY3hqMmdydU8yQTZYWVdVNk1XU1lsUE05RHZDS08wNzNkZUczM3k5aTM3eTBVd2dLdFZTQVNqWnBleWJhc2tqY3owK2dKaG0rVVJVRHI4c1gwZmp0dU14dmdNTzJ4Ny91b0lOS1pUQnE3WDMwVmJZK3VSc3V5aDJHVHlHUWlnZmx6NTZCMXhUSTgrOHdXdkhQb0lNSlFtRkxxa0JqT21Ua2ZsQkNOWmRuRVJINTBOQkpoMnBPKzU4SDFmT3pZOFFMKzl1WWI2T3JxTkQvV3h6WTI0cW9ycnpLcHBPZ1NRaGdoZS9mdXhpdXY3RFFDNnVwcTBUenZBVFRRaVozSnBrR25kRjFaVHVMdnp2bldNdCtOcnFrYVhZVWFPbjAvL09EZk9Ibnl1RTRkazBLMHVXRVZmejRXVzJvdHhBQmcraGNZcERTdE5YemZ3MDAzVDBFNm5VRW1sZW81M1A3dXBNMmIvOUIxd1FSTXZlWExWMWVOcVQzYzNkTkhIdk1RSVFMUmFOUVE0ZHdhL0RkT21aa1ppNmJGRE02THBWYUV3a1NIQkptQ3dDMyt4Tk9ibjEwOFpBSldyMTdOVHB3NHdZOGRPOGE3dXJwNElwRjBiL2pTcENuY3NjY0Z1Y0ROQlhtZmVoeGZDT2tCeWdlNHh4Z0l6R0hNb3IxQ2xHeE9INHZSZnRDVlNUcU9MU2o5aE8rN3duUGRrRkl3cEhYbGUzN3VOMXVlYTJ0dmIrK3JyYTBKSjB5WUlNYVBIeStibXBwRWEydXIrcDhDbXB1YldWOWZIK3Z1N3VZOVBUMnN2NytmWjdOWkZnUUIxMGJwNGREY3llVnlEZ0NYNEJPOGt0RW1PQVNyQ0Y3aUlFV1FSWVJGQkVYa0NUazlNczZEV0RRYTBudnloQUlBU1dKVkpCS1JvMGFOVW5WMWRiSyt2bDdXMU5Tb1RaczJxVStVUWl0WHJ1U3BWTXJxN095ME9qbzYrT25UcHkyS2hpV2xkSVFRRG8yV0lWK0VVb29UR0FET0dPUEY5QkY2b0hzTlVTSWk1SndiVUNvV05Ea2lHVFkwTkdpaUlUbFFybCsvWG4ybUt2VFJSeDhwRXFESTg0Sk1hVkEwUkRLWjFQZEJxY2RMd0Q0V1lWVWNaWEV1U2tGbFdJMFlNVUlLSVNSNVhoRngvZjFVbWl1R1poTXZXTENBcDlOcFBqQXdZRklya1Vnd0VxRHZRZUlZZ1VzcE1VaStpRUZUSHhkQlZVdkY0M0VESXFvcUt5c2xpVkNVS21hTXhXSnkzYnAxYXNpcTBNS0ZDeG1WUUpiSlpMZ2VpOFFaUlFZRXBrSGUwemhiV1Fobnk2aHQyd2FVMHlqbXRTTFA2eEVrUWd1U2RIOVdWRnRibTdvZzUwQkxTNHNoVFJIUlloaVIxZEI1cnNtYmVSaUc1cjcwSEtDMFV3UXRRcEVBdmFhS29yUzM5WnJTK1Y3dS80VU0xcTVkeS9UQnBGRWlDS1VDT09kR0JCRTJqWjRXc1hUcFVvWC9heHZHTUlZeGJQOEZvR056N1l0ay9GSUFBQUFBU1VWT1JLNUNZSUk9JztcclxuXHJcbiAgICAgICAgdGhpcy5sb2NhbEZ1bmN0aW9ucyA9IHtcclxuICAgICAgICAgICAgLy8gJChmdW5jdGlvbigpe30pO1xyXG4gICAgICAgICAgICByZWFkeTogZnVuY3Rpb24oZm4pIHtcclxuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5hdHRhY2hFdmVudCA/IGRvY3VtZW50LnJlYWR5U3RhdGUgPT09IFwiY29tcGxldGVcIiA6IGRvY3VtZW50LnJlYWR5U3RhdGUgIT09IFwibG9hZGluZ1wiKXtcclxuICAgICAgICAgICAgICAgICAgICBmbigpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZm4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICByZW1vdmVDbGFzczogZnVuY3Rpb24oZWwsIGNsYXNzTmFtZSl7XHJcbiAgICAgICAgICAgICAgICBpZiAoZWwuY2xhc3NMaXN0KVxyXG4gICAgICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBlbC5jbGFzc05hbWUgPSBlbC5jbGFzc05hbWUucmVwbGFjZShuZXcgUmVnRXhwKCcoXnxcXFxcYiknICsgY2xhc3NOYW1lLnNwbGl0KCcgJykuam9pbignfCcpICsgJyhcXFxcYnwkKScsICdnaScpLCAnICcpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBhZGRDbGFzczogZnVuY3Rpb24gKGVsLCBjbGFzc05hbWUpe1xyXG4gICAgICAgICAgICAgICAgaWYgKGVsLmNsYXNzTGlzdClcclxuICAgICAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgZWwuY2xhc3NOYW1lICs9ICcgJyArIGNsYXNzTmFtZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaGFzQ2xhc3M6IGZ1bmN0aW9uKGVsLCBjbGFzc05hbWUpe1xyXG4gICAgICAgICAgICAgICAgaWYgKGVsLmNsYXNzTGlzdClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoJyhefCApJyArIGNsYXNzTmFtZSArICcoIHwkKScsICdnaScpLnRlc3QoZWwuY2xhc3NOYW1lKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmb3IgKHZhciBwcm9wIGluIGRlZmF1bHRzKSB7XHJcbiAgICAgICAgICAgIGlmICghZGVmYXVsdHMuaGFzT3duUHJvcGVydHkocHJvcCkpXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgIHRoaXNbcHJvcF0gPSBwYXJhbXMuaGFzT3duUHJvcGVydHkocHJvcCkgPyBwYXJhbXNbcHJvcF0gOiBkZWZhdWx0c1twcm9wXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYWN0aW9uU3RhdGUgPSBmYWxzZTsgLy8g0L3QsNGF0L7QtNC40YLRgdGPINC70Lgg0L/QvtC/0LDQvyDQsiDQv9GA0L7RhtC10YHRgdC1INC+0YLQutGA0YvRgtC40Y8v0LfQsNC60YDRi9GC0LjRj1xyXG4gICAgICAgIHRoaXMuaXNBY3RpdmUgPSBmYWxzZTsgLy8g0L7RgtC60YDRi9GCINC70Lgg0YHQtdC50YfQsNGBINC60LDQutC+0Lkt0LvQuNCx0L4g0L/QvtC/0LDQv1xyXG4gICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7IC8vINC+0YLQutGA0YvRgiDQu9C4INGB0LXQudGH0LDRgSDQutCw0LrQvtC5LdC70LjQsdC+INC/0L7Qv9Cw0L9cclxuICAgICAgICB0aGlzLmRlbGF5ZWRMb2FkaW5nID0gbnVsbDsgLy8g0LjQvdC00LjQutCw0YLQvtGAINGC0LDQudC80LDRg9GC0LAg0L3QsCDQt9Cw0L/Rg9GB0Log0YHRgtCw0YLRg9GB0LAg0LfQsNCz0YDRg9C30LrQuFxyXG4gICAgICAgIHRoaXMuY2xvc2VBZnRlckRlbGF5ID0gZmFsc2U7IC8vINGC0YDQtdCx0YPQtdGC0YHRjyDQu9C4INC30LDQutGA0YvRgtGMINC/0L7Qv9Cw0L8g0L/QvtGB0LvQtSDQt9Cw0LLQtdGA0YjQtdC90LjRjyDQv9C10YDQuNC+0LTQsCDQt9Cw0LTQtdGA0LbQutC4XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0TG9hZGluZ1BpYyA9IHRoaXMubG9hZGluZ1BpYyAmJiB0eXBlb2YgdGhpcy5sb2FkaW5nUGljID09PSAnc3RyaW5nJyA/IHRoaXMubG9hZGluZ1BpYyA6IGRlZmF1bHRMb2FkaW5nUGljOyAvLyDQutCw0YDRgtC40L3QutCwINC30LDQs9GA0YPQt9C60LgsINC40YHQv9C+0LvRjNC30YPQtdC80LDRjyDQv9C+INGD0LzQvtC70YfQsNC90LjRjlxyXG4gICAgICAgIHRoaXMuc2Nyb2xsVG9wID0gbnVsbDtcclxuXHJcbiAgICAgICAgU3R5bGVTaGVldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3N0eWxlW3RpdGxlPVwiJyt0aXRsZUhhc2hCYXNlKydcIl0nKTtcclxuXHJcbiAgICAgICAgaWYgKHBhcmFtcy5oYXNPd25Qcm9wZXJ0eSgnc3R5bGVTaGVldFRpdGxlJykgJiYgcGFyYW1zLnN0eWxlU2hlZXRUaXRsZSA9PT0gdGl0bGVIYXNoQmFzZSlcclxuICAgICAgICAgICAgc3BlY2lhbEhhc2hJbml0ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgLy8g0LXRgdC70Lgg0Y3RgtC+INC90LUg0LHQsNC30L7QstGL0Lkg0LDQstGC0L7QstGL0LfQvtCyIC0g0L/QvtGH0LjRgdGC0LjRgtGMINGC0LDQsdC70LjRhtGDINGB0YLQuNC70LXQuVxyXG4gICAgICAgIGlmICghc3BlY2lhbEhhc2hJbml0ICYmIFN0eWxlU2hlZXQpXHJcbiAgICAgICAgICAgIFN0eWxlU2hlZXQuaW5uZXJIVE1MID0gJyc7XHJcblxyXG5cclxuICAgICAgICB2YXIgdGVtcGxhdGVzID0ge1xyXG4gICAgICAgICAgICBtZXNzYWdlOiAnPGRpdiBjbGFzcz1cImVhc3ktcG9wdXBcIiBkYXRhLW5hbWU9XCJtZXNzYWdlXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiZWFzeS1wb3B1cF9fY2xvc2VyXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2PjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiZWFzeS1wb3B1cF9faGVhZGluZ1wiPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImVhc3ktcG9wdXBfX2JvZHlcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiZWFzeS1wb3B1cF9fdGV4dFwiPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJidXR0b25fd3JhcHBlclwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8YnV0dG9uIGNsYXNzPVwiY2xvc2luZ19idXR0b25cIiBpZD1cImNsb3NlX2J0blwiPtCe0Jo8L2J1dHRvbj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JyxcclxuICAgICAgICAgICAgY29uZmlybTogJzxkaXYgY2xhc3M9XCJlYXN5LXBvcHVwXCIgZGF0YS1uYW1lPVwiY29uZmlybVwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImVhc3ktcG9wdXBfX2Nsb3NlclwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXY+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImVhc3ktcG9wdXBfX2hlYWRpbmdcIj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJlYXN5LXBvcHVwX19ib2R5XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImVhc3ktcG9wdXBfX3RleHRcIj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYnV0dG9uX3dyYXBwZXJcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGJ1dHRvbiBjbGFzcz1cImNvbmZpcm1fYnV0dG9uXCI+0J/RgNC40L3Rj9GC0Yw8L2J1dHRvbj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGJ1dHRvbiBjbGFzcz1cImNsb3NpbmdfYnV0dG9uXCI+0J7RgtC60LvQvtC90LjRgtGMPC9idXR0b24+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PidcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIHBhcmFtcy50ZW1wbGF0ZXMgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGN1c3RvbVRlbXBsYXRlIGluIHBhcmFtcy50ZW1wbGF0ZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmICghcGFyYW1zLnRlbXBsYXRlcy5oYXNPd25Qcm9wZXJ0eShjdXN0b21UZW1wbGF0ZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVzW2N1c3RvbVRlbXBsYXRlXSA9IHBhcmFtcy50ZW1wbGF0ZXNbY3VzdG9tVGVtcGxhdGVdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyAkKGZ1bmN0aW9uKCl7fSk7XHJcbiAgICAgICAgdGhpcy5sb2NhbEZ1bmN0aW9ucy5yZWFkeSgoKT0+e1xyXG4gICAgICAgICAgICB2YXIgcG9wdXBTZWxlY3RvciA9IHRoaXMuYXBwZW5kVG8gPyB0aGlzLmFwcGVuZFRvIDogZGVmYXVsdFBvcHVwUGFyZW50LFxyXG4gICAgICAgICAgICAgICAgcG9wdXBQYXJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpLFxyXG4gICAgICAgICAgICAgICAgcG9wdXBUaW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yICsgJyA+IC5lYXN5LXBvcHVwLXRpbnQnKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChwb3B1cFRpbnQpXHJcbiAgICAgICAgICAgICAgICBwb3B1cFRpbnQuZGF0YXNldC5pZCA9IHRoaXMuaWQ7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHBvcHVwUGFyZW50LmlubmVySFRNTCArPSAnPGRpdiBjbGFzcz1cImVhc3ktcG9wdXAtdGludFwiIGRhdGEtaWQ9XCInK3RoaXMuaWQrJ1wiPjwvZGl2Pic7XHJcblxyXG4gICAgICAgICAgICB2YXIgaHRtbCA9ICcnO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRlbXBsYXRlcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0ZW1wbGF0ZXMuaGFzT3duUHJvcGVydHkobmFtZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRlbXBsYXRlc1tuYW1lXSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGVtcGxhdGVzW25hbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3B1cEl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWFzeS1wb3B1cC10aW50W2RhdGEtaWQ9XCInK3RoaXMuaWQrJ1wiXSAuZWFzeS1wb3B1cFtkYXRhLW5hbWU9XCInK25hbWUrJ1wiXScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3B1cEl0ZW0ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vcG9wdXBJdGVtLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHBvcHVwSXRlbSwgZnVuY3Rpb24obm9kZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lYXN5LXBvcHVwLXRpbnRbZGF0YS1pZD1cIicrdGhpcy5pZCsnXCJdIC5lYXN5LXBvcHVwW2RhdGEtbmFtZT1cIicrbmFtZSsnXCJdJykubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gdGVtcGxhdGVzW25hbWVdO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lYXN5LXBvcHVwLXRpbnRbZGF0YS1pZD1cIicrdGhpcy5pZCsnXCJdIC5lYXN5LXBvcHVwX19sb2FkaW5nJykpXHJcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwiZWFzeS1wb3B1cF9fbG9hZGluZ1wiPjwvZGl2Pic7XHJcblxyXG4gICAgICAgICAgICAvLyQoJy5lYXN5LXBvcHVwLXRpbnQnKS5hcHBlbmQoaHRtbCk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lYXN5LXBvcHVwLXRpbnRbZGF0YS1pZD1cIicrdGhpcy5pZCsnXCJdJykuaW5uZXJIVE1MICs9IGh0bWw7XHJcblxyXG4gICAgICAgICAgICAvLyQoJy5lYXN5LXBvcHVwJykuaGlkZSgpOyAvLyDQv9C+INGD0LzQvtC70YfQsNC90LjRjiDRgyDQv9C+0L/QsNC/0L7QsiBkaXNwbGF5IGlubGluZS1ibG9jaywg0L/QvtGN0YLQvtC80YMg0L3Rg9C20L3QviDRgdC60YDRi9GC0YxcclxuICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWFzeS1wb3B1cCcpLCBmdW5jdGlvbihub2RlKXtcclxuICAgICAgICAgICAgICAgIG5vZGUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAobmF2aWdhdG9yLnBsYXRmb3JtLmluZGV4T2YoJ2lQYWQnKSAhPT0gLTEgfHwgbmF2aWdhdG9yLnBsYXRmb3JtLmluZGV4T2YoJ2lQaG9uZScpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKFsnb2JqZWN0Jywnc3RyaW5nJ10uaW5jbHVkZXModHlwZW9mIHRoaXMuaGlkZU9uSW9zKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYWxGdW5jdGlvbnMuYWRkQ2xhc3MoZG9jdW1lbnQuYm9keSwgJ2Vhc3ktcG9wdXBfaW9zJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhbEZ1bmN0aW9ucy5hZGRDbGFzcyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJyksICdlYXN5LXBvcHVwX2lvcycpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgaGlkZUFyciA9IHR5cGVvZiB0aGlzLmhpZGVPbklvcyA9PSAnc3RyaW5nJyA/IHRoaXMuaGlkZU9uSW9zLnNwbGl0KCcsJykgOiB0aGlzLmhpZGVPbklvcztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZCcpLmlubmVySFRNTCArPSAnPHN0eWxlIHRpdGxlPVwiJyt0aXRsZUhhc2hCYXNlKydfb3ZlcmZsb3dcIj48L3N0eWxlPic7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IFN0eWxlU2hlZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzdHlsZVt0aXRsZT1cIicrdGl0bGVIYXNoQmFzZSsnX292ZXJmbG93XCJdJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGhpZGVBcnIuZm9yRWFjaChmdW5jdGlvbih2LGksYXJyKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU3R5bGVTaGVldC5pbm5lckhUTUwgKz0gJyAuZWFzeS1wb3B1cF9ib2R5LW9wZW4gJyt2Kycge2Rpc3BsYXk6IG5vbmV9ICc7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcblxyXG5cclxuICAgICAgICBpZiAodGhpcy5zdHlsZXMgJiYgIShzcGVjaWFsSGFzaEluaXQgJiYgU3R5bGVTaGVldCkpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnN0eWxlcyAhPT0gJ29iamVjdCcpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlcyA9IHt9O1xyXG5cclxuICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgKiDQqNCQ0JMgMTpcclxuICAgICAgICAgICAgKiDQntCx0YrQtdC60YIgc2NyaXB0U3R5bGVzINGB0L7QtNC10YDQttC40YIg0LTQtdGE0L7Qu9GC0L3Ri9C1INGB0YLQuNC70Lgg0LTQu9GPINC/0L7Qv9Cw0L/QsCwg0L7QsdGK0LXQutGCIHNjcmlwdE1lZGlhU3R5bGVzIC0g0LTQtdGE0L7Qu9GC0L3Ri9C1INC80LXQtNC40LDQt9Cw0L/RgNC+0YHRiy4g0J7QsdGK0LXQutGCIHRoaXMuc3R5bGVzINC00L7Qv9C+0LvQvdGP0LXRgiDQvtCx0YrQtdC60YIgc2NyaXB0U3R5bGVzICjQsCDQvtCx0YrQtdC60YIgdGhpcy5tZWRpYVN0eWxlcyDQtNC+0L/QvtC70L3Rj9C10YIg0L7QsdGK0LXQutGCIHNjcmlwdE1lZGlhU3R5bGVzKTog0LXRgdC70Lgg0YPQutCw0LfQsNC90L3QvtCz0L4g0YHQtdC70LXQutGC0L7RgNCwINC90LXRgiAtINC+0L0g0LTQvtCx0LDQstC70Y/QtdGC0YHRjywg0LXRgdC70Lgg0LXRgdGC0YwgLSDRgtC+INC10LPQviDQvtCx0YrQtdC60YIgQ1NTLdGB0YLQuNC70LXQuSDQtNC+0L/QvtC70L3Rj9C10YLRgdGPINGB0YLQuNC70Y/QvNC4INC40Lcg0L7QsdGK0LXQutGC0LAgdGhpcy5zdHlsZXMgKNC/0L4g0YHQvtC+0YLQstC10YLRgdGC0LLRg9GO0YnQtdC80YMg0YHQtdC70LXQutGC0L7RgNGDKSwg0L/RgNC4INGN0YLQvtC8INC10YHQu9C4INCyINC30L3QsNGH0LXQvdC40Lgg0L7QtNC90L7Qs9C+INC40Lcg0YHQstC+0LnRgdGC0LIg0YPQutCw0LfQsNC90L4gZmFsc2UgLSDQtNCw0L3QvdC+0LUg0YHQstC+0LnRgdGC0LLQviDRg9C00LDQu9GP0LXRgtGB0Y8uINCQ0L3QsNC70L7Qs9C40YfQvdGL0Lwg0L7QsdGA0LDQt9C+0LwsINC10YHQu9C4INCyINC+0LHRitC10LrRgtC1IHRoaXMuc3R5bGVzINC/0LXRgNC10LTQsNC9INGB0LXQu9C10LrRgtC+0YAg0YHQviDQt9C90LDRh9C10L3QuNC10LwgZmFsc2UsINGC0L4g0Y3RgtC+0YIg0YHQtdC70LXQutGC0L7RgCDRg9C00LDQu9GP0LXRgtGB0Y8g0LjQtyDQvtCx0YrQtdC60YLQsCBzY3JpcHRTdHlsZXMuXHJcbiAgICAgICAgICAgICogKi9cclxuXHJcbiAgICAgICAgICAgIHZhciBzY3JpcHRTdHlsZXMgPSB7XHJcbiAgICAgICAgICAgICAgICAnLmVhc3ktcG9wdXAtdGludCc6IHtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnbm9uZScsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcxMDB2aCAhaW1wb3J0YW50JyxcclxuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJyxcclxuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1g6ICdoaWRkZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICdSR0JBKDAsMCwwLDAuNyknLFxyXG4gICAgICAgICAgICAgICAgICAgIHpJbmRleDogMTAwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogMCxcclxuICAgICAgICAgICAgICAgICAgICByaWdodDogMCxcclxuICAgICAgICAgICAgICAgICAgICB0b3A6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbjogJ2NlbnRlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgdmVydGljYWxBbGlnbjogJ21pZGRsZSdcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAnLmVhc3ktcG9wdXBfaW9zIC5lYXN5LXBvcHVwLXRpbnQnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnYXV0byAhaW1wb3J0YW50JyxcclxuICAgICAgICAgICAgICAgICAgICBwb2ludGVyRXZlbnRzOiAnYXV0bydcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAnLmVhc3ktcG9wdXAtdGludDo6YWZ0ZXInOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnMTAwJScsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgdmVydGljYWxBbGlnbjogJ21pZGRsZSdcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAnLmVhc3ktcG9wdXBfX2xvYWRpbmcnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogJ2hpZGRlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcxMDB2dycsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnMTAwdmgnLFxyXG4gICAgICAgICAgICAgICAgICAgIHpJbmRleDogJy0xJyxcclxuICAgICAgICAgICAgICAgICAgICB0b3A6ICcwJyxcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiAnMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogJ2FsbCAxNTBtcycsXHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogJ3VybCgnK3RoaXMuZGVmYXVsdExvYWRpbmdQaWMrJykgY2VudGVyIGNlbnRlciAvIDUwcHggbm8tcmVwZWF0IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC43KSdcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAnLmVhc3ktcG9wdXAtdGludC5pc19sb2FkaW5nIC5lYXN5LXBvcHVwX19sb2FkaW5nJzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6ICd2aXNpYmxlJyxcclxuICAgICAgICAgICAgICAgICAgICB6SW5kZXg6ICcxMDAwMSdcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAnYm9keSAuZWFzeS1wb3B1cC10aW50Jzoge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlvcyBzY3JvbGwgZml4XHJcbiAgICAgICAgICAgICAgICAgICAgV2Via2l0T3ZlcmZsb3dTY3JvbGxpbmc6ICd0b3VjaCcsXHJcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dTY3JvbGxpbmc6ICd0b3VjaCdcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAnLmVhc3ktcG9wdXAnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogJyNmZmYnLFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnY2FsYygxMDAlIC0gMjBweCknLFxyXG4gICAgICAgICAgICAgICAgICAgIG1heFdpZHRoOiAnNTUwcHgnLFxyXG4gICAgICAgICAgICAgICAgICAgIG1pbkhlaWdodDogJzEzMHB4JyxcclxuICAgICAgICAgICAgICAgICAgICBtYXJnaW46ICc1MHB4IDEwcHgnLFxyXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlclJhZGl1czogJzEwcHgnLFxyXG4gICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsQWxpZ246ICdtaWRkbGUnLFxyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJyxcclxuICAgICAgICAgICAgICAgICAgICBib3hTaGFkb3c6ICcwIDAgMTVweCAjZmZmJyxcclxuICAgICAgICAgICAgICAgICAgICBXZWJraXRUcmFuc2Zvcm06ICd0cmFuc2xhdGVaKDBweCknXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgJy5lYXN5LXBvcHVwX19oZWFkaW5nJzoge1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogJzQzcHgnLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICcjMzQ5OTFiJyxcclxuICAgICAgICAgICAgICAgICAgICBmb250OiAnYm9sZCAzMHB4LzQ1cHggQXJpYWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnI2ZmZicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiAnY2VudGVyJyxcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0VHJhbnNmb3JtOiAndXBwZXJjYXNlJyxcclxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAnMCAxN3B4JyxcclxuICAgICAgICAgICAgICAgICAgICBtYXJnaW46ICdhdXRvJ1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICcuZWFzeS1wb3B1cF9fYm9keSc6IHtcclxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAnMTJweCAxN3B4IDI3cHgnXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgJy5lYXN5LXBvcHVwX19jbG9zZXInOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcyNXB4JyxcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcyNXB4JyxcclxuICAgICAgICAgICAgICAgICAgICByaWdodDogJzVweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiAnOHB4JyxcclxuICAgICAgICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiAnYWxsIDI4MG1zJ1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICcuZWFzeS1wb3B1cF9fY2xvc2VyID4gZGl2Jzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6ICcxMXB4JyxcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogJzNweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnMjVweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogJyNmZmYnLFxyXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlclJhZGl1czogJzNweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogJ2FsbCAyODBtcydcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAnLmVhc3ktcG9wdXBfX2Nsb3NlciA+IGRpdjpudGgtY2hpbGQoMSknOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgV2Via2l0VHJhbnNmb3JtOiAncm90YXRlKDQ1ZGVnKScsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAncm90YXRlKDQ1ZGVnKSdcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAnLmVhc3ktcG9wdXBfX2Nsb3NlciA+IGRpdjpudGgtY2hpbGQoMiknOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgV2Via2l0VHJhbnNmb3JtOiAncm90YXRlKC00NWRlZyknLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3JvdGF0ZSgtNDVkZWcpJ1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICcuZWFzeS1wb3B1cF9fY2xvc2VyOmhvdmVyJzoge1xyXG4gICAgICAgICAgICAgICAgICAgIFdlYmtpdFRyYW5zZm9ybTogJ3NjYWxlM2QoMS4zLCAxLjMsIDAuMiknLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlM2QoMS4zLCAxLjMsIDAuMiknXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgJy5lYXN5LXBvcHVwX19jbG9zZXI6aG92ZXIgPiBkaXYnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogJyM5Y2QxZDQnXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgJy5lYXN5LXBvcHVwIGJ1dHRvbiwgLmVhc3ktcG9wdXAgaW5wdXRbdHlwZT1cInN1Ym1pdFwiXSc6IHtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcclxuICAgICAgICAgICAgICAgICAgICBtYXJnaW46ICdhdXRvJyxcclxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAnIzM0OTkxYicsXHJcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnNnB4JyxcclxuICAgICAgICAgICAgICAgICAgICBmb250OiAnYm9sZCAxOHB4IFRhaG9tYScsXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjZmZmJyxcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICczNXB4JyxcclxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAnMCAzNXB4JyxcclxuICAgICAgICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiAnYWxsIDI1MG1zJyxcclxuICAgICAgICAgICAgICAgICAgICBib3JkZXI6ICdub25lJ1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICcuZWFzeS1wb3B1cCBidXR0b246aG92ZXIsIC5lYXN5LXBvcHVwIGlucHV0W3R5cGU9XCJzdWJtaXRcIl06aG92ZXInOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC43XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgJy5lYXN5LXBvcHVwX19ib2R5IC5jbG9zaW5nX2J1dHRvbic6IHtcclxuICAgICAgICAgICAgICAgICAgICBtYXJnaW5Ub3A6ICcxMHB4J1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICcuZWFzeS1wb3B1cF9fdGV4dCc6IHtcclxuICAgICAgICAgICAgICAgICAgICBtYXJnaW5Cb3R0b206ICcxNnB4JyxcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0QWxpZ246ICdjZW50ZXInXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgJy5lYXN5LXBvcHVwIC5pbnB1dF93cmFwcGVyJzoge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogJzEwcHgnXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgJy5lYXN5LXBvcHVwIC5idXR0b25fd3JhcHBlciBidXR0b24nOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luTGVmdDogJzEwcHgnLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpblJpZ2h0OiAnMTBweCdcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAnLmVhc3ktcG9wdXAtdGludCBpbnB1dCwgLmVhc3ktcG9wdXAtdGludCBidXR0b24nOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgV2Via2l0VHJhbnNmb3JtOiAndHJhbnNsYXRlWigwcHgpJ1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICdib2R5LmVhc3ktcG9wdXBfb3ZlcmZsb3csIGh0bWwuZWFzeS1wb3B1cF9vdmVyZmxvdyc6IHtcclxuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbiAhaW1wb3J0YW50JyxcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcxMDB2aCcsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2ZpeGVkJ1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICdib2R5LmVhc3ktcG9wdXBfb3ZlcmZsb3cuZWFzeS1wb3B1cF9pb3MsIGh0bWwuZWFzeS1wb3B1cF9vdmVyZmxvdy5lYXN5LXBvcHVwX2lvcyc6IHtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICdhdXRvJyxcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcclxuICAgICAgICAgICAgICAgICAgICBwb2ludGVyRXZlbnRzOiAnbm9uZSdcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAnYm9keS5lYXN5LXBvcHVwX292ZXJmbG93LmVhc3ktcG9wdXBfaW9zID4gZGl2W3N0eWxlXTpub3QoW2NsYXNzXSksIGh0bWwuZWFzeS1wb3B1cF9vdmVyZmxvdy5lYXN5LXBvcHVwX2lvcyA+IGRpdltzdHlsZV06bm90KFtjbGFzc10pJzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50ZXJFdmVudHM6ICdhdXRvJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdmFyIHNjcmlwdE1lZGlhU3R5bGVzID0ge1xyXG4gICAgICAgICAgICAgICAgJ0BrZXlmcmFtZXMgZWFzeVBvcHVwU2hvdyc6IHtcclxuICAgICAgICAgICAgICAgICAgICAnZnJvbSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAnc2NhbGUzZCgwLjMsIDAuMywgMC4zKScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFdlYmtpdFRyYW5zZm9ybTogJ3NjYWxlM2QoMC4zLCAwLjMsIDAuMyknXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAnOTAlJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICdALXdlYmtpdC1rZXlmcmFtZXMgZWFzeVBvcHVwU2hvdyc6IHtcclxuICAgICAgICAgICAgICAgICAgICAnZnJvbSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAnc2NhbGUzZCgwLjMsIDAuMywgMC4zKScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFdlYmtpdFRyYW5zZm9ybTogJ3NjYWxlM2QoMC4zLCAwLjMsIDAuMyknXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAnOTAlJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICdAa2V5ZnJhbWVzIGVhc3lQb3B1cENsb3NlJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICdmcm9tJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgJzkwJSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAnc2NhbGUzZCgwLjMsIDAuMywgMC4zKScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFdlYmtpdFRyYW5zZm9ybTogJ3NjYWxlM2QoMC4zLCAwLjMsIDAuMyknXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAndG8nOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgJ0Atd2Via2l0LWtleWZyYW1lcyBlYXN5UG9wdXBDbG9zZSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAnZnJvbSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICc5MCUnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlM2QoMC4zLCAwLjMsIDAuMyknLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBXZWJraXRUcmFuc2Zvcm06ICdzY2FsZTNkKDAuMywgMC4zLCAwLjMpJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgJ3RvJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMucmVwbGFjZVN0eWxlcykge1xyXG4gICAgICAgICAgICAgICAgLy9zY3JpcHRTdHlsZXMgPSAkLmV4dGVuZChzY3JpcHRTdHlsZXMsIHRoaXMuc3R5bGVzKTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHByb3AxIGluIHRoaXMuc3R5bGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnN0eWxlcy5oYXNPd25Qcm9wZXJ0eShwcm9wMSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzY3JpcHRTdHlsZXNbcHJvcDFdID0gdGhpcy5zdHlsZXNbcHJvcDFdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2NyaXB0U3R5bGVzID0gc3R5bGVIYW5kbGVyLnByb2Nlc3NPYmooc2NyaXB0U3R5bGVzLCB0aGlzLnN0eWxlcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1lZGlhU3R5bGVzICE9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm1lZGlhU3R5bGVzICE9PSAnb2JqZWN0JylcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lZGlhU3R5bGVzID0ge307XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbWVkaWFRdWVyeSBpbiB0aGlzLm1lZGlhU3R5bGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLm1lZGlhU3R5bGVzLmhhc093blByb3BlcnR5KG1lZGlhUXVlcnkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbWVkaWFRdWVyeSA9IG1lZGlhUXVlcnkudHJpbSgpLnJlcGxhY2UoL1xccysvZywgJyAnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWVkaWFTdHlsZXNbbWVkaWFRdWVyeV0gPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzY3JpcHRNZWRpYVN0eWxlc1ttZWRpYVF1ZXJ5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXNjcmlwdE1lZGlhU3R5bGVzLmhhc093blByb3BlcnR5KG1lZGlhUXVlcnkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcmlwdE1lZGlhU3R5bGVzW21lZGlhUXVlcnldID0gdGhpcy5tZWRpYVN0eWxlc1ttZWRpYVF1ZXJ5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXBsYWNlU3R5bGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vc2NyaXB0TWVkaWFTdHlsZXNbbWVkaWFRdWVyeV0gPSAkLmV4dGVuZChzY3JpcHRNZWRpYVN0eWxlc1ttZWRpYVF1ZXJ5XSwgdGhpcy5tZWRpYVN0eWxlc1ttZWRpYVF1ZXJ5XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHByb3AyIGluIHRoaXMubWVkaWFTdHlsZXNbbWVkaWFRdWVyeV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5tZWRpYVN0eWxlc1ttZWRpYVF1ZXJ5XS5oYXNPd25Qcm9wZXJ0eShwcm9wMikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NyaXB0TWVkaWFTdHlsZXNbbWVkaWFRdWVyeV1bcHJvcDJdID0gdGhpcy5tZWRpYVN0eWxlc1ttZWRpYVF1ZXJ5XVtwcm9wMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JpcHRNZWRpYVN0eWxlc1ttZWRpYVF1ZXJ5XSA9IHN0eWxlSGFuZGxlci5wcm9jZXNzT2JqKHNjcmlwdE1lZGlhU3R5bGVzW21lZGlhUXVlcnldLCB0aGlzLm1lZGlhU3R5bGVzW21lZGlhUXVlcnldKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgKiDQqNCQ0JMgMjpcclxuICAgICAgICAgICAgKiDQldGB0LvQuCDQsiBET00g0LXRidGRINC90LUg0YHQvtC30LTQsNC90LAg0YLQsNCx0LvQuNGG0LAg0YHRgtC40LvQtdC5ICjRgtC10LMgc3R5bGUpINC00LDQvdC90YvQvCDRgdC60YDQuNC/0YLQvtC8LCDRgtC+INC+0L3QsCDRgdC+0LfQtNCw0ZHRgtGB0Y8uXHJcbiAgICAgICAgICAgICog0JHQtdGA0ZHRgtGB0Y8g0L7QsdGK0LXQutGCIHNjcmlwdFN0eWxlcywg0Lgg0LrQsNC20LTRi9C5INC10LPQviDRgdC10LvQtdC60YLQvtGAINGBINGB0L7QvtGC0LLQtdGC0YHRgtCy0YPRjtGJ0LjQvCDQvtCx0YrQtdC60YLQvtC8IENTUy3RgdGC0LjQu9C10Lkg0L/RgNC10L7QsdGA0LDQt9GD0Y7RgtGB0Y8g0LIg0L3QtdC+0LHRhdC+0LTQuNC80YvQuSDRhNC+0YDQvNCw0YIg0Lgg0LfQsNC/0LjRgdGL0LLQsNGO0YLRgdGPINCyINGB0L7Qt9C00LDQvdC90YPRjiDRgtCw0LHQu9C40YbRgyDRgdGC0LjQu9C10LkuINCi0L4g0LbQtSDRgdCw0LzQvtC1INC00LXQu9Cw0LXRgtGB0Y8g0LTQu9GPINC60LDQttC00L7QuSDRgdGC0YDQvtC60Lgg0LzQtdC00LjQsNC30LDQv9GA0L7RgdCwINCyINC+0LHRitC10LrRgtC1IHNjcmlwdE1lZGlhU3R5bGVzLlxyXG4gICAgICAgICAgICAqICovXHJcblxyXG4gICAgICAgICAgICBpZiAoIVN0eWxlU2hlZXQpIHtcclxuICAgICAgICAgICAgICAgIC8vJCgnaGVhZCcpLmFwcGVuZCgnPHN0eWxlIHRpdGxlPVwiJyt0aXRsZUhhc2hCYXNlKydcIj48L3N0eWxlPicpO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZCcpLmlubmVySFRNTCArPSAnPHN0eWxlIHRpdGxlPVwiJyt0aXRsZUhhc2hCYXNlKydcIj48L3N0eWxlPic7XHJcbiAgICAgICAgICAgICAgICBTdHlsZVNoZWV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc3R5bGVbdGl0bGU9XCInK3RpdGxlSGFzaEJhc2UrJ1wiXScpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgc2VsZWN0b3IgaW4gc2NyaXB0U3R5bGVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNjcmlwdFN0eWxlcy5oYXNPd25Qcm9wZXJ0eShzZWxlY3RvcikpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgc2VsZWN0b3IgPSBzZWxlY3Rvci50cmltKCkucmVwbGFjZSgvXFxzKy9nLCAnICcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdG9yQ29udGVudCA9IHN0eWxlSGFuZGxlci5vYmpUb0NTUyhzY3JpcHRTdHlsZXNbc2VsZWN0b3JdKTtcclxuICAgICAgICAgICAgICAgIFN0eWxlU2hlZXQuaW5uZXJIVE1MICs9IHNlbGVjdG9yICsgXCJ7XCIgKyBzZWxlY3RvckNvbnRlbnQgKyBcIn1cIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMubWVkaWFTdHlsZXMgIT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBtZWRpYVN0cmluZyBpbiBzY3JpcHRNZWRpYVN0eWxlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghc2NyaXB0TWVkaWFTdHlsZXMuaGFzT3duUHJvcGVydHkobWVkaWFTdHJpbmcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lZGlhSFRNTCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG1lZGlhU2VsZWN0b3IgaW4gc2NyaXB0TWVkaWFTdHlsZXNbbWVkaWFTdHJpbmddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2NyaXB0TWVkaWFTdHlsZXNbbWVkaWFTdHJpbmddLmhhc093blByb3BlcnR5KG1lZGlhU2VsZWN0b3IpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZWRpYVNlbGVjdG9yID0gbWVkaWFTZWxlY3Rvci50cmltKCkucmVwbGFjZSgvXFxzKy9nLCAnICcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lZGlhU2VsZWN0b3JDb250ZW50ID0gc3R5bGVIYW5kbGVyLm9ialRvQ1NTKHNjcmlwdE1lZGlhU3R5bGVzW21lZGlhU3RyaW5nXVttZWRpYVNlbGVjdG9yXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZWRpYUhUTUwgKz0gbWVkaWFTZWxlY3RvcitcIntcIittZWRpYVNlbGVjdG9yQ29udGVudCtcIn1cIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgU3R5bGVTaGVldC5pbm5lckhUTUwgKz0gbWVkaWFTdHJpbmcgKyBcIntcIiArIG1lZGlhSFRNTCArIFwifVwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICBzaG93KHBhcmFtcyA9IHt9KSB7XHJcbiAgICAgICAgLy8g0LXRgdC70Lgg0LrQsNC60L7QtS3RgtC+INC00LXQudGB0YLQstC40LUg0LXRidGRINC90LUg0L7RgtGA0LDQsdC+0YLQsNC70L4gLSDRgdGA0LDQt9GDINCy0YvRhdC+0LTQuNC8XHJcbiAgICAgICAgaWYgKHRoaXMuYWN0aW9uU3RhdGUpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG5cclxuICAgICAgICAvLyDQtdGB0LvQuCDQsdGL0LvQuCDQsNC60YLQuNCy0L3Ri9C1INGN0LvQtdC80LXQvdGC0YsgLSDQt9Cw0L/QvtC80LjQvdCw0LXQvCDQuCDQtNC10LvQsNC10Lwg0L3QtdCw0LrRgtC40LLQvdGL0LzQuFxyXG4gICAgICAgIHZhciBlbGVtc1dpdGhGb2N1cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJzpmb2N1cycpO1xyXG4gICAgICAgIGlmIChlbGVtc1dpdGhGb2N1cykge1xyXG4gICAgICAgICAgICAvLyDRgdC+0YXRgNCw0L3Rj9C10Lwg0Y3Qu9C10LzQtdC90YIsINC90LAg0LrQvtGC0L7RgNGL0Lwg0LHRi9C7INGE0L7QutGD0YEg0LPQu9C+0LHQsNC70YzQvdC+XHJcbiAgICAgICAgICAgIHdpbmRvdy5hM2U5NWUxODBjYzA0YzlkODVmZmRkOGViZWNlZjA0NyA9IGVsZW1zV2l0aEZvY3VzO1xyXG4gICAgICAgICAgICBlbGVtc1dpdGhGb2N1cy5ibHVyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgc2hvd1BhcmFtcyA9IHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiAn0J7RiNC40LHQutCwJywgLy8g0LfQsNCz0L7Qu9C+0LLQvtC6INC/0L7Qv9Cw0L/QsFxyXG4gICAgICAgICAgICAgICAgdGV4dDogJ9Cf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LAg0LLRgdC/0LvRi9Cy0LDRjtGJ0LXQs9C+INC+0LrQvdCwLiDQn9C+0LbQsNC70YPQudGB0YLQsCwg0L7QsdGA0LDRgtC40YLQtdGB0Ywg0LIg0L7QsdGA0LDRgtC90YPRjiDRgdCy0Y/Qt9GMLicsIC8vINGC0LXQutGB0YIg0L/QvtC/0LDQv9CwXHJcbiAgICAgICAgICAgICAgICBidG5FdmVudHM6IHRydWUsIC8vINCy0LrQu9GO0YfQuNGC0Ywv0L7RgtC60LvRjtGH0LjRgtGMINGB0L7QsdGL0YLQuNGPINC/0YDQuCDQutC70LjQutC1INC90LAg0LrQvdC+0L/QutC4IC5jbG9zaW5nX2J1dHRvbiDQuCAuY29uZmlybV9idXR0b25cclxuICAgICAgICAgICAgICAgIG5hbWU6ICdtZXNzYWdlJywgLy8g0LjQvNGPINC/0L7Qv9Cw0L/QsCwg0LrQvtGC0L7RgNGL0Lkg0LLRi9C30YvQstCw0LXRgtGB0Y8gKNCw0YLRgNC40LHRg9GCIGRhdGEtbmFtZSlcclxuICAgICAgICAgICAgICAgIGh0bWw6IGZhbHNlLCAvLyDQv9GA0LjQvNC10L3QuNGC0YwgSFRNTC3RiNCw0LHQu9C+0L0sINC10YHQu9C4INC+0L0g0L/QtdGA0LXQtNCw0L0gKNC40LPQvdC+0YDQuNGA0YPRjyB0aXRsZSwgdGV4dCDQuCBuYW1lKVxyXG4gICAgICAgICAgICAgICAgY2xvc2VyQ2FsbGJhY2s6IGZ1bmN0aW9uKCl7fSxcclxuICAgICAgICAgICAgICAgIGNsb3NpbmdCdG5DYWxsYmFjazogZmFsc2UsIC8vINC10YHQu9C4INC90LAgLmNsb3NpbmdfYnV0dG9uINC90YPQttC90L4g0L/QvtCy0LXRgdC40YLRjCDQvtGC0LTQtdC70YzQvdGL0LkgY2FsbGJhY2sgLSDQv9C10YDQtdC00LDRgtGMINGB0Y7QtNCwXHJcbiAgICAgICAgICAgICAgICBjb25maXJtQnRuQ2FsbGJhY2s6IGZ1bmN0aW9uKCl7fSwgLy8g0LXRgdC70Lgg0L3QsCAuY29uZmlybV9idXR0b24g0L3Rg9C20L3QviDQv9C+0LLQtdGB0LjRgtGMINC+0YLQtNC10LvRjNC90YvQuSBjYWxsYmFjayAtINC/0LXRgNC10LTQsNGC0Ywg0YHRjtC00LBcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDbGlja0NhbGxiYWNrOiBmYWxzZSwgLy8g0LXRgdC70Lgg0L/RgNC4INC60LvQuNC60LUg0L3QsCAuZWFzeS1wb3B1cC10aW50ICjRhNC+0L0pINC90YPQttC10L0g0L7RgtC00LXQu9GM0L3Ri9C5IGNhbGxiYWNrIC0g0L/QtdGA0LXQtNCw0YLRjCDRgdGO0LTQsFxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2tPbkVzYzogZmFsc2UsIC8vINC10YHQu9C4INC/0YDQuCDQvdCw0LbQsNGC0LjQuCBFc2Mg0L3Rg9C20LXQvSDQvtGC0LTQtdC70YzQvdGL0LkgY2FsbGJhY2sgLSDQv9C10YDQtdC00LDRgtGMINGB0Y7QtNCwXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFja09uRW50ZXI6IGZhbHNlLCAvLyDQtdGB0LvQuCDQv9GA0Lgg0L3QsNC20LDRgtC40LggRW50ZXIg0L3Rg9C20LXQvSDQvtGC0LTQtdC70YzQvdGL0LkgY2FsbGJhY2sgLSDQv9C10YDQtdC00LDRgtGMINGB0Y7QtNCwLFxyXG4gICAgICAgICAgICAgICAgY2xvc2luZ0J0blRleHQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgY29uZmlybUJ0blRleHQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uU2hvdzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBhbmltYXRpb25DbG9zZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBzcGVlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBjbG9zaW5nU3BlZWQ6IGZhbHNlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFBvcHVwID0gdGhpcyxcclxuICAgICAgICAgICAgc2Nyb2xsaW5nRWxlbWVudCA9IGRvY3VtZW50LnNjcm9sbGluZ0VsZW1lbnQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCAvLyDRjdC70LXQvNC10L3Rgiwg0L7RgtCy0LXRh9Cw0Y7RidC40Lkg0LfQsCDQv9GA0L7QutGA0YPRgtC60YMg0LTQvtC60YPQvNC10L3RgtCwXHJcbiAgICAgICAgICAgIGVsZW07XHJcblxyXG4gICAgICAgIGZvciAodmFyIHByb3AgaW4gc2hvd1BhcmFtcykge1xyXG4gICAgICAgICAgICBpZiAoIXNob3dQYXJhbXMuaGFzT3duUHJvcGVydHkocHJvcCkpXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChwYXJhbXMuaGFzT3duUHJvcGVydHkocHJvcCkpXHJcbiAgICAgICAgICAgICAgICBzaG93UGFyYW1zW3Byb3BdID0gcGFyYW1zW3Byb3BdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g0LXRgdC70Lgg0LfQsNC00LDQvdGLINC/0LDRgNCw0LzQtdGC0YDRiyDRgdC60L7RgNC+0YHRgtC4INC/0L7QutCw0LfQsCDQuNC70Lgg0LfQsNC60YDRi9GC0LjRjyDQv9C+0L/QsNC/0LAgLSDQuNGB0L/QvtC70YzQt9GD0LXQvCDQuNGFLCDQuNC90LDRh9C1INC40YHQv9C+0LvRjNC30YPQtdC8INGB0LrQvtGA0L7RgdGC0Ywg0L/QvtC/0LDQv9CwLCDRg9C60LDQt9Cw0L3QvdGD0Y4g0LIg0L7QsdGK0LXQutGC0LUg0L/QviDRg9C80L7Qu9GH0LDQvdC40Y5cclxuICAgICAgICBsZXQgY2xvc2VTcGVlZCA9IHNob3dQYXJhbXMuY2xvc2luZ1NwZWVkICE9PSBmYWxzZSA/IHNob3dQYXJhbXMuY2xvc2luZ1NwZWVkIDogdGhpcy5zcGVlZCxcclxuICAgICAgICAgICAgc2hvd1NwZWVkID0gc2hvd1BhcmFtcy5zcGVlZCAhPT0gZmFsc2UgPyBzaG93UGFyYW1zLnNwZWVkIDogdGhpcy5zcGVlZDtcclxuXHJcbiAgICAgICAgLy8g0YHQvNC+0YLRgNC40LwsINC10YHRgtGMINC70Lgg0YPQttC1INC+0YLQutGA0YvRgtGL0LUgKNCw0LrRgtC40LLQvdGL0LUpINC/0L7Qv9Cw0L/Ri1xyXG4gICAgICAgIHZhciBhY3RpdmVQb3B1cHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWFzeS1wb3B1cC5hY3RpdmUnKTtcclxuICAgICAgICBpZiAoYWN0aXZlUG9wdXBzLmxlbmd0aCl7XHJcbiAgICAgICAgICAgIHZhciBhbmltYXRpb25OYW1lT3V0ID0gc2hvd1BhcmFtcy5hbmltYXRpb25DbG9zZSAmJiB0eXBlb2Ygc2hvd1BhcmFtcy5hbmltYXRpb25DbG9zZSA9PT0gJ3N0cmluZycgPyBzaG93UGFyYW1zLmFuaW1hdGlvbkNsb3NlIDogdGhpcy5kZWZhdWx0QW5pbWF0aW9uQ2xvc2UsXHJcbiAgICAgICAgICAgICAgICBhbmltYXRpb25TdHJpbmdPdXQgPSBjbG9zZVNwZWVkICsgJ21zICcgKyBhbmltYXRpb25OYW1lT3V0ICsgJyAxIGxpbmVhcic7XHJcblxyXG4gICAgICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGFjdGl2ZVBvcHVwcywgKG5vZGUpPT57XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvY2FsRnVuY3Rpb25zLnJlbW92ZUNsYXNzKG5vZGUsICdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIG5vZGUuc3R5bGUuV2Via2l0QW5pbWF0aW9uID0gYW5pbWF0aW9uU3RyaW5nT3V0O1xyXG4gICAgICAgICAgICAgICAgbm9kZS5zdHlsZS5hbmltYXRpb24gPSBhbmltYXRpb25TdHJpbmdPdXQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgbGV0IGRpc3BsYXlOb25lQ2FsbGJhY2sgPSAoKT0+e1xyXG4gICAgICAgICAgICAgICAgLy8g0LLRgdC10Lwg0L/QvtC/0LDQv9Cw0Lwg0YHRgtCw0LLQuNC8IGRpc3BsYXkgbm9uZSDQuCDQt9Cw0L/Rg9GB0LrQsNC10Lwg0LzQtdGC0L7QtCBzaG93INGB0L3QvtCy0LAsINGBINGC0LXQvNC4INC20LUg0L/QsNGA0LDQvNC10YLRgNCw0LzQuFxyXG4gICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWFzeS1wb3B1cCcpLCBmdW5jdGlvbihub2RlKXtcclxuICAgICAgICAgICAgICAgICAgICBub2RlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvdyhzaG93UGFyYW1zKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjbG9zZVNwZWVkKVxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChkaXNwbGF5Tm9uZUNhbGxiYWNrLCBjbG9zZVNwZWVkKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgZGlzcGxheU5vbmVDYWxsYmFjaygpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDQtdGB0LvQuCDQuNC80Y8g0L/QvtC/0LDQv9CwID09PSBmYWxzZSAtINC90YPQttC90L4g0YLQvtC70YzQutC+INC/0L7QutCw0LfQsNGC0Ywg0YLQuNC90YIsINCwINC00LDQu9GM0L3QtdC50YjQsNGPINC+0LHRgNCw0LHQvtGC0LrQsCDQvdC1INGC0YDQtdCx0YPQtdGC0YHRj1xyXG4gICAgICAgIGlmIChzaG93UGFyYW1zLm5hbWUgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIC8vINC+0YLQvtCx0YDQsNC20LXQvdC40LUg0L/QvtC/0LDQv9CwICjQsCDRgtC+0YfQvdC10LUsINGC0LjQvdGC0LApXHJcbiAgICAgICAgICAgIHZhciB0aW50T25seSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lYXN5LXBvcHVwLXRpbnRbZGF0YS1pZD1cIicrdGhpcy5pZCsnXCJdJyk7XHJcbiAgICAgICAgICAgIHRpbnRPbmx5LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsRnVuY3Rpb25zLmFkZENsYXNzKHRpbnRPbmx5LCAnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIHRoaXMuaXNBY3RpdmUgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBlbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVhc3ktcG9wdXAtdGludFtkYXRhLWlkPVwiJyt0aGlzLmlkKydcIl0gLmVhc3ktcG9wdXBbZGF0YS1uYW1lPVwiJytzaG93UGFyYW1zLm5hbWUrJ1wiXScpO1xyXG4gICAgICAgIGlmICghZWxlbSlcclxuICAgICAgICAgICAgZWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lYXN5LXBvcHVwLXRpbnRbZGF0YS1pZD1cIicrdGhpcy5pZCsnXCJdIC5lYXN5LXBvcHVwW2RhdGEtbmFtZT1cIicrKHNob3dQYXJhbXMubmFtZSA9ICdtZXNzYWdlJykrJ1wiXScpO1xyXG4gICAgICAgIGlmICghZWxlbSlcclxuICAgICAgICAgICAgZWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lYXN5LXBvcHVwLXRpbnRbZGF0YS1pZD1cIicrdGhpcy5pZCsnXCJdIC5lYXN5LXBvcHVwOmZpcnN0LWNoaWxkJyk7XHJcblxyXG4gICAgICAgIC8vINCy0YHRgtCw0LLQutCwINC60L7QvdGC0LXQvdGC0LAg0LIg0L/QvtC/0LDQv1xyXG4gICAgICAgIGlmIChzaG93UGFyYW1zLnRpdGxlICE9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICB2YXIgcG9wdXBIZWFkaW5nID0gZWxlbS5xdWVyeVNlbGVjdG9yKCcuZWFzeS1wb3B1cF9faGVhZGluZycpO1xyXG4gICAgICAgICAgICBpZiAocG9wdXBIZWFkaW5nKVxyXG4gICAgICAgICAgICAgICAgcG9wdXBIZWFkaW5nLmlubmVySFRNTCA9IHNob3dQYXJhbXMudGl0bGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzaG93UGFyYW1zLmh0bWwpIHtcclxuICAgICAgICAgICAgdmFyIHBvcHVwQm9keSA9IGVsZW0ucXVlcnlTZWxlY3RvcignLmVhc3ktcG9wdXBfX2JvZHknKTtcclxuICAgICAgICAgICAgaWYgKHBvcHVwQm9keSlcclxuICAgICAgICAgICAgICAgIHBvcHVwQm9keS5pbm5lckhUTUwgPSBzaG93UGFyYW1zLmh0bWw7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHNob3dQYXJhbXMudGV4dCAhPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwb3B1cFRleHQgPSBlbGVtLnF1ZXJ5U2VsZWN0b3IoJy5lYXN5LXBvcHVwX190ZXh0Jyk7XHJcbiAgICAgICAgICAgICAgICBpZiAocG9wdXBUZXh0KVxyXG4gICAgICAgICAgICAgICAgICAgIHBvcHVwVGV4dC5pbm5lckhUTUwgPSBzaG93UGFyYW1zLnRleHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vINGC0LXQutGB0YIg0LrQvdC+0L/QvtC6XHJcbiAgICAgICAgdmFyIHBvcHVwQ2xvc2luZ0J1dHRvbiA9IGVsZW0ucXVlcnlTZWxlY3RvcignLmNsb3NpbmdfYnV0dG9uJyksXHJcbiAgICAgICAgICAgIHBvcHVwQ29uZmlybUJ1dHRvbiA9IGVsZW0ucXVlcnlTZWxlY3RvcignLmNvbmZpcm1fYnV0dG9uJyk7XHJcblxyXG4gICAgICAgIGlmIChwb3B1cENsb3NpbmdCdXR0b24pIHtcclxuICAgICAgICAgICAgaWYgKHNob3dQYXJhbXMuY2xvc2luZ0J0blRleHQgIT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICBwb3B1cENsb3NpbmdCdXR0b24uaW5uZXJIVE1MID0gc2hvd1BhcmFtcy5jbG9zaW5nQnRuVGV4dDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChzaG93UGFyYW1zLm5hbWUgPT09ICdjb25maXJtJylcclxuICAgICAgICAgICAgICAgICAgICBwb3B1cENsb3NpbmdCdXR0b24uaW5uZXJIVE1MID0gJ9Ce0YLQutC70L7QvdC40YLRjCc7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzaG93UGFyYW1zLm5hbWUgPT09ICdtZXNzYWdlJylcclxuICAgICAgICAgICAgICAgICAgICBwb3B1cENsb3NpbmdCdXR0b24uaW5uZXJIVE1MID0gJ9Ce0JonO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocG9wdXBDb25maXJtQnV0dG9uKSB7XHJcbiAgICAgICAgICAgIGlmIChzaG93UGFyYW1zLmNvbmZpcm1CdG5UZXh0ICE9PSBmYWxzZSlcclxuICAgICAgICAgICAgICAgIHBvcHVwQ29uZmlybUJ1dHRvbi5pbm5lckhUTUwgPSBzaG93UGFyYW1zLmNvbmZpcm1CdG5UZXh0O1xyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChzaG93UGFyYW1zLm5hbWUgPT09ICdjb25maXJtJylcclxuICAgICAgICAgICAgICAgICAgICBwb3B1cENvbmZpcm1CdXR0b24uaW5uZXJIVE1MID0gJ9Cf0L7QtNGC0LLQtdGA0LTQuNGC0YwnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDRgdGC0LDQstC40Lwgc2Nyb2xsVG9wLCDQvdC+INGC0L7Qu9GM0LrQviDQtdGB0LvQuCDRjdGC0L4g0L3QtSDQt9Cw0LzQtdC90LAg0L7QtNC90L7Qs9C+INC/0L7Qv9Cw0L/QsCDQtNGA0YPQs9C40LxcclxuICAgICAgICBpZiAoIXRoaXMuaXNBY3RpdmUpXHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9wID0gc2Nyb2xsaW5nRWxlbWVudC5zY3JvbGxUb3A7XHJcbiAgICAgICAgLy8g0L7RgtC+0LHRgNCw0LbQtdC90LjQtSDQv9C+0L/QsNC/0LBcclxuICAgICAgICB2YXIgdGludCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lYXN5LXBvcHVwLXRpbnRbZGF0YS1pZD1cIicrdGhpcy5pZCsnXCJdJyk7XHJcbiAgICAgICAgdGludC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICB0aGlzLmxvY2FsRnVuY3Rpb25zLmFkZENsYXNzKHRpbnQsJ2FjdGl2ZScpO1xyXG4gICAgICAgIHRoaXMuaXNBY3RpdmUgPSB0cnVlO1xyXG5cclxuICAgICAgICBsZXQgYm9keUVsID0gZG9jdW1lbnQuYm9keSxcclxuICAgICAgICAgICAgaHRtbEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpO1xyXG5cclxuICAgICAgICB0aGlzLmxvY2FsRnVuY3Rpb25zLmFkZENsYXNzKGh0bWxFbCwgJ2Vhc3ktcG9wdXBfYm9keS1vcGVuJyk7XHJcbiAgICAgICAgdGhpcy5sb2NhbEZ1bmN0aW9ucy5hZGRDbGFzcyhib2R5RWwsICdlYXN5LXBvcHVwX2JvZHktb3BlbicpO1xyXG5cclxuICAgICAgICAvLyDQtdGB0LvQuCDQvdC1INC+0YLQutC70Y7Rh9C10L3QsCDQsNCy0YLQvtC/0YDQvtC60YDRg9GC0LrQsFxyXG4gICAgICAgIGlmICghdGhpcy5ub1Njcm9sbFRvcCkge1xyXG4gICAgICAgICAgICBsZXQgY2xhc3NOYW1lID0gJ2Vhc3ktcG9wdXBfb3ZlcmZsb3cnO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5sb2NhbEZ1bmN0aW9ucy5hZGRDbGFzcyhodG1sRWwsIGNsYXNzTmFtZSk7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxGdW5jdGlvbnMuYWRkQ2xhc3MoYm9keUVsLCBjbGFzc05hbWUpO1xyXG5cclxuICAgICAgICAgICAgLy8g0LTQvtCx0LDQstC70Y/QtdC8INCx0LvQvtC60LDRgtC+0YAg0YHQutGA0L7Qu9C70LAsINGC0L7Qu9GM0LrQviDQtdGB0LvQuCDRjdGC0L4g0L3QtSBpb3NcclxuICAgICAgICAgICAgaWYgKG5hdmlnYXRvci5wbGF0Zm9ybS5pbmRleE9mKCdpUGFkJykgPT09IC0xICYmIG5hdmlnYXRvci5wbGF0Zm9ybS5pbmRleE9mKCdpUGhvbmUnKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGJvZHlFbC5zY3JvbGxUb3AgPSB0aGlzLnNjcm9sbFRvcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmxvY2FsRnVuY3Rpb25zLmhhc0NsYXNzKGVsZW0sJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgIGVsZW0uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsRnVuY3Rpb25zLmFkZENsYXNzKGVsZW0sJ2FjdGl2ZScpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGFuaW1hdGlvbk5hbWVJbiA9IHNob3dQYXJhbXMuYW5pbWF0aW9uU2hvdyAmJiB0eXBlb2Ygc2hvd1BhcmFtcy5hbmltYXRpb25TaG93ID09PSAnc3RyaW5nJyA/IHNob3dQYXJhbXMuYW5pbWF0aW9uU2hvdyA6IHRoaXMuZGVmYXVsdEFuaW1hdGlvblNob3csXHJcbiAgICAgICAgICAgICAgICBhbmltYXRpb25TdHJpbmdJbiA9IHNob3dTcGVlZCArICdtcyAnICsgYW5pbWF0aW9uTmFtZUluICsgJyAxIGxpbmVhcic7XHJcblxyXG4gICAgICAgICAgICBlbGVtLnN0eWxlLldlYmtpdEFuaW1hdGlvbiA9IGFuaW1hdGlvblN0cmluZ0luO1xyXG4gICAgICAgICAgICBlbGVtLnN0eWxlLmFuaW1hdGlvbiA9IGFuaW1hdGlvblN0cmluZ0luO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGNsb3NpbmdCdG4gPSBlbGVtLnF1ZXJ5U2VsZWN0b3IoJy5jbG9zaW5nX2J1dHRvbicpLFxyXG4gICAgICAgICAgICBjb25maXJtQnRuID0gZWxlbS5xdWVyeVNlbGVjdG9yKCcuY29uZmlybV9idXR0b24nKSxcclxuICAgICAgICAgICAgcG9wdXBDbG9zZXIgPSBlbGVtLnF1ZXJ5U2VsZWN0b3IoJy5lYXN5LXBvcHVwX19jbG9zZXInKTtcclxuXHJcbiAgICAgICAgLy8g0LXRgdC70Lgg0LXRgdGC0Ywg0L3QtdGB0L3Rj9GC0YvQtSDRgdC+0LHRi9GC0LjRjyDQvtGCINC/0YDQtdC00YvQtNGD0YnQtdCz0L4g0L/QvtC/0LDQv9CwIC0g0YHQvdGP0YLRjCDQuNGFXHJcbiAgICAgICAgaWYgKHRoaXMuaGFzT3duUHJvcGVydHkoJ2tleWRvd25DYWxsYmFja0VzYycpKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmtleWRvd25DYWxsYmFja0VzYyk7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmtleWRvd25DYWxsYmFja0VzYztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaGFzT3duUHJvcGVydHkoJ2tleWRvd25DYWxsYmFja0VudGVyJykpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMua2V5ZG93bkNhbGxiYWNrRW50ZXIpO1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5rZXlkb3duQ2FsbGJhY2tFbnRlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNsb3NpbmdCdG4gJiYgdGhpcy5oYXNPd25Qcm9wZXJ0eSgnY2xvc2luZ0J0bkNhbGxiYWNrJykpIHtcclxuICAgICAgICAgICAgY2xvc2luZ0J0bi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2luZ0J0bkNhbGxiYWNrLCB7b25jZTogdHJ1ZX0pO1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5jbG9zaW5nQnRuQ2FsbGJhY2s7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjb25maXJtQnRuICYmIHRoaXMuaGFzT3duUHJvcGVydHkoJ2NvbmZpcm1CdG5DYWxsYmFjaycpKSB7XHJcbiAgICAgICAgICAgIGNvbmZpcm1CdG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNvbmZpcm1CdG5DYWxsYmFjaywge29uY2U6IHRydWV9KTtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuY29uZmlybUJ0bkNhbGxiYWNrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGludCAmJiB0aGlzLmhhc093blByb3BlcnR5KCd0aW50Q2FsbGJhY2snKSkge1xyXG4gICAgICAgICAgICB0aW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy50aW50Q2FsbGJhY2ssIHtvbmNlOiB0cnVlfSk7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnRpbnRDYWxsYmFjaztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHBvcHVwQ2xvc2VyICYmIHRoaXMuaGFzT3duUHJvcGVydHkoJ2Nsb3NlckNhbGxiYWNrTWFpbicpKSB7XHJcbiAgICAgICAgICAgIHBvcHVwQ2xvc2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZXJDYWxsYmFja01haW4sIHtvbmNlOiB0cnVlfSk7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNsb3NlckNhbGxiYWNrTWFpbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2xvc2VyQ2FsbGJhY2tNYWluID0gKCk9PntcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzaG93UGFyYW1zLmNsb3NlckNhbGxiYWNrICE9PSAnb2JqZWN0JyB8fCAhc2hvd1BhcmFtcy5jbG9zZXJDYWxsYmFjay5oYXNPd25Qcm9wZXJ0eSgnY2xvc2VyT2ZmJykgfHwgc2hvd1BhcmFtcy5jbG9zZXJDYWxsYmFjay5jbG9zZXJPZmYgIT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChQb3B1cC5hY3Rpb25TdGF0ZSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAvLyDQsdCw0LfQvtCy0YvQuSBjYWxsYmFjaywg0LrQvtGC0L7RgNGL0Lkg0L/RgNC+0LjRgdGF0L7QtNC40YIg0L/RgNC4INC90LDQttCw0YLQuNC4INC90LAgLmVhc3ktcG9wdXBfX2Nsb3NlclxyXG4gICAgICAgICAgICAgICAgUG9wdXAuY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzaG93UGFyYW1zLmNsb3NlckNhbGxiYWNrID09PSAnZnVuY3Rpb24nKVxyXG4gICAgICAgICAgICAgICAgc2hvd1BhcmFtcy5jbG9zZXJDYWxsYmFjaygpO1xyXG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygc2hvd1BhcmFtcy5jbG9zZXJDYWxsYmFjayA9PT0gJ29iamVjdCcgJiYgc2hvd1BhcmFtcy5jbG9zZXJDYWxsYmFjay5oYXNPd25Qcm9wZXJ0eSgnY2FsbGJhY2snKSAmJiB0eXBlb2Ygc2hvd1BhcmFtcy5jbG9zZXJDYWxsYmFjay5jYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJylcclxuICAgICAgICAgICAgICAgIHNob3dQYXJhbXMuY2xvc2VyQ2FsbGJhY2suY2FsbGJhY2soKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChwb3B1cENsb3NlcilcclxuICAgICAgICAgICAgICAgIHBvcHVwQ2xvc2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgUG9wdXAuY2xvc2VyQ2FsbGJhY2tNYWluKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyDRgdC+0LHRi9GC0LjQtSDQvdCwINC60LvQvtGD0LfQtdGAIC0g0LLQtdGI0LDQtdC8INC60L7Qu9C70LHQtdC6LCDQutC+0YLQvtGA0YvQuSDQvtGC0YDQsNCx0L7RgtCw0LXRgiDRgtC+0LvRjNC60L4g0L7QtNC40L0g0YDQsNC3ICjQsiDQutC+0L3RhtC1INC+0L0g0YPQtNCw0LvRj9C10YIg0YHQsNC8INGB0LXQsdGPKVxyXG4gICAgICAgIGlmIChwb3B1cENsb3NlcilcclxuICAgICAgICAgICAgcG9wdXBDbG9zZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlckNhbGxiYWNrTWFpbiwge29uY2U6IHRydWV9KTtcclxuICAgICAgICAvLyDQtdGB0LvQuCDRgdC+0LHRi9GC0LjRjyDQvdCwINC60L3QvtC/0LrQuCDQvdC1INC+0YLQutC70Y7Rh9C10L3Ri1xyXG4gICAgICAgIGlmIChzaG93UGFyYW1zLmJ0bkV2ZW50cykge1xyXG4gICAgICAgICAgICBpZiAoY2xvc2luZ0J0bikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zaW5nQnRuQ2FsbGJhY2sgPSBzaG93UGFyYW1zLmNsb3NpbmdCdG5DYWxsYmFjayA/IGZ1bmN0aW9uIGNsb3NpbmcoKXtcclxuICAgICAgICAgICAgICAgICAgICBzaG93UGFyYW1zLmNsb3NpbmdCdG5DYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zaW5nKTtcclxuICAgICAgICAgICAgICAgIH0gOiB0aGlzLmNsb3NlckNhbGxiYWNrTWFpbjtcclxuICAgICAgICAgICAgICAgIGNsb3NpbmdCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NpbmdCdG5DYWxsYmFjaywge29uY2U6IHRydWV9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY29uZmlybUJ0bikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maXJtQnRuQ2FsbGJhY2sgPSBzaG93UGFyYW1zLmNvbmZpcm1CdG5DYWxsYmFjayA/IGZ1bmN0aW9uIGNvbmZpcm0oKXtcclxuICAgICAgICAgICAgICAgICAgICBzaG93UGFyYW1zLmNvbmZpcm1CdG5DYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjb25maXJtKTtcclxuICAgICAgICAgICAgICAgIH0gOiB0aGlzLmNsb3NlckNhbGxiYWNrTWFpbjtcclxuICAgICAgICAgICAgICAgIGNvbmZpcm1CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNvbmZpcm1CdG5DYWxsYmFjaywge29uY2U6IHRydWV9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDQtdGB0LvQuCDQstC60LvRjtGH0LXQvdC+INC30LDQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwINC/0L4g0LrQu9C40LrRgyDQvdCwINGE0L7QvVxyXG4gICAgICAgIGlmICh0aGlzLmFsbG93QmFja2dyb3VuZENhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGludENhbGxiYWNrID0gKGUpPT57XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMubG9jYWxGdW5jdGlvbnMuaGFzQ2xhc3MoZS50YXJnZXQsICdlYXN5LXBvcHVwLXRpbnQnKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFlLnRhcmdldC5oYXNBdHRyaWJ1dGUoJ2RhdGEtaWQnKSB8fCBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKSAhPSBQb3B1cC5pZClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKFBvcHVwLmlzTG9hZGluZylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgKHNob3dQYXJhbXMuYmFja2dyb3VuZENsaWNrQ2FsbGJhY2sgPyBzaG93UGFyYW1zLmJhY2tncm91bmRDbGlja0NhbGxiYWNrIDogUG9wdXAuY2xvc2VyQ2FsbGJhY2tNYWluKSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIFBvcHVwLnRpbnRDYWxsYmFjaywge29uY2U6IHRydWV9KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGludC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMudGludENhbGxiYWNrKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYWN0aW9uU3RhdGUgPSB0cnVlO1xyXG4gICAgICAgIGxldCBzaG93Q29tcGxldGVkQ2FsbGJhY2sgPSAoKT0+e1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvblN0YXRlID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAvLyDQtdGB0LvQuCDQstC60LvRjtGH0LXQvdC+INC30LDQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwINC/0YDQuCDQvdCw0LbQsNGC0LjQuCBFc2Mg0LjQu9C4INC/0L7QtNGC0LLQtdGA0LbQtNC10L3QuNC1INC/0YDQuCDQvdCw0LbQsNGC0LjQuCBFbnRlciAvLyDQt9Cw0L/Rg9GB0LrQsNGC0Ywg0YLQvtC70YzQutC+INC/0L4g0YLQsNC50LzQsNGD0YLRgywg0LjQvdCw0YfQtSDQs9C70Y7QuiDRgdC+0LHRi9GC0LjRjyAtINC+0YLQutC70Y7Rh9Cw0LXRgtGB0Y8g0YDQsNC90YzRiNC1INC/0L7Qu9C90L7Qs9C+INC/0L7Rj9Cy0LvQtdC90LjRjyDQv9C+0L/QsNC/0LAsINC/0YDQuCDRjdGC0L7QvCDQvNC10YLQvtC0IGNsb3NlINCx0LvQvtC60LjRgNGD0LXRgtGB0Y8sINGCLtC6LiDQvtGC0LrRgNGL0YLQuNC1INC/0L7Qv9Cw0L/QsCDQtdGJ0ZEg0L3QtSDQt9Cw0LLQtdGA0YjQuNC70L7RgdGMID0pXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93Q2FsbGJhY2tPbkVzYykge1xyXG4gICAgICAgICAgICAgICAgLy8gY2FsbGJhY2sg0LTQu9GPIEVzY1xyXG4gICAgICAgICAgICAgICAgdGhpcy5rZXlkb3duQ2FsbGJhY2tFc2MgPSAoZSk9PntcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIVBvcHVwLmlzQWN0aXZlIHx8IFBvcHVwLmlzTG9hZGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgUG9wdXAua2V5ZG93bkNhbGxiYWNrRXNjKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8kLl9kYXRhKGRvY3VtZW50LCBcImV2ZW50c1wiKTsgLy8g0L/RgNC+0LLQtdGA0LrQsCDRjdCy0LXQvdGC0L7QsiDQvdCwIGpRdWVyeVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlDb2RlID0gZS5oYXNPd25Qcm9wZXJ0eSgna2V5Q29kZScpID8gZS5rZXlDb2RlIDogZS53aGljaDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFBvcHVwLmFsbG93Q2FsbGJhY2tPbkVzYyAmJiBrZXlDb2RlID09PSAyNykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAoc2hvd1BhcmFtcy5jYWxsYmFja09uRXNjID8gc2hvd1BhcmFtcy5jYWxsYmFja09uRXNjIDogUG9wdXAuY2xvc2VyQ2FsbGJhY2tNYWluKSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgUG9wdXAua2V5ZG93bkNhbGxiYWNrRXNjKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmtleWRvd25DYWxsYmFja0VzYyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dDYWxsYmFja09uRW50ZXIpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNhbGxiYWNrINC00LvRjyBFbnRlclxyXG4gICAgICAgICAgICAgICAgdGhpcy5rZXlkb3duQ2FsbGJhY2tFbnRlciA9IChlKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghUG9wdXAuaXNBY3RpdmUgfHwgUG9wdXAuaXNMb2FkaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBQb3B1cC5rZXlkb3duQ2FsbGJhY2tFbnRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vJC5fZGF0YShkb2N1bWVudCwgXCJldmVudHNcIik7IC8vINC/0YDQvtCy0LXRgNC60LAg0Y3QstC10L3RgtC+0LIg0L3QsCBqUXVlcnlcclxuICAgICAgICAgICAgICAgICAgICB2YXIga2V5Q29kZSA9IGUuaGFzT3duUHJvcGVydHkoJ2tleUNvZGUnKSA/IGUua2V5Q29kZSA6IGUud2hpY2g7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChQb3B1cC5hbGxvd0NhbGxiYWNrT25FbnRlciAmJiBrZXlDb2RlID09PSAxMykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAoc2hvd1BhcmFtcy5jYWxsYmFja09uRW50ZXIgPyBzaG93UGFyYW1zLmNhbGxiYWNrT25FbnRlciA6IChzaG93UGFyYW1zLmNvbmZpcm1CdG5DYWxsYmFjayA/IHNob3dQYXJhbXMuY29uZmlybUJ0bkNhbGxiYWNrIDogUG9wdXAuY2xvc2VyQ2FsbGJhY2tNYWluKSkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIFBvcHVwLmtleWRvd25DYWxsYmFja0VudGVyKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMua2V5ZG93bkNhbGxiYWNrRW50ZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKHNob3dTcGVlZClcclxuICAgICAgICAgICAgc2V0VGltZW91dChzaG93Q29tcGxldGVkQ2FsbGJhY2ssIHNob3dTcGVlZCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBzaG93Q29tcGxldGVkQ2FsbGJhY2soKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UocGFyYW1zID0ge30pIHtcclxuICAgICAgICAvLyDQtdGB0LvQuCDQutCw0LrQvtC1LdGC0L4g0LTQtdC50YHRgtCy0LjQtSDQtdGJ0ZEg0L3QtSDQvtGC0YDQsNCx0L7RgtCw0LvQviAtINGB0YDQsNC30YMg0LLRi9GF0L7QtNC40LxcclxuICAgICAgICBpZiAodGhpcy5hY3Rpb25TdGF0ZSlcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAg0L/RgNC40L3QuNC80LDQtdGCINC+0LHRitC10LrRgiDRgSDQv9Cw0YDQsNC80LXRgtGA0LDQvNC4OlxyXG4gICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoY2FsbGJhY2ssINC60L7RgtC+0YDRi9C5INCy0YvQv9C+0LvQvdC40YLRgdGPINC/0LXRgNC10LQg0LfQsNC60YDRi9GC0LjQtdC8KSxcclxuICAgICAgICBzdG9wQWZ0ZXJDYWxsYmFjazogYm9vbGVhbiAo0LXRgdC70Lgg0LjQvNC10LXRgiDQt9C90LDRh9C10L3QuNC1IHRydWUsINGB0LrRgNC40L/RgiDQv9GA0LXRgNGL0LLQsNC10YLRgdGPINC/0L7RgdC70LUg0LLRi9C30L7QstCwINC60L7Qu9C70LHQtdC60LApLFxyXG4gICAgICAgIGFuaW1hdGlvbkNsb3NlOiBzdHJpbmcgKNC40LzRjyDQsNC90LjQvNCw0YbQuNC4LCDQutC+0YLQvtGA0YPRjiDQv9GA0LjQvNC10L3QuNGC0Ywg0L/RgNC4INC30LDQutGA0YvRgtC40Lgg0L/QvtC/0LDQv9CwKVxyXG4gICAgICAgIGNsb3NlU3BlZWQ6IG51bWJlciAo0YHQutC+0YDQvtGB0YLRjCDQsNC90LjQvNCw0YbQuNC4INC30LDQutGA0YvRgtC40Y8pXHJcbiAgICAgICAgKi9cclxuICAgICAgICB2YXIgY2xvc2VQYXJhbXMgPSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBzdG9wQWZ0ZXJDYWxsYmFjazogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBhbmltYXRpb25DbG9zZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBzcGVlZDogZmFsc2VcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBjbG9zZVBhcmFtcykge1xyXG4gICAgICAgICAgICBpZiAoIWNsb3NlUGFyYW1zLmhhc093blByb3BlcnR5KHByb3ApKVxyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICBpZiAocGFyYW1zLmhhc093blByb3BlcnR5KHByb3ApKVxyXG4gICAgICAgICAgICAgICAgY2xvc2VQYXJhbXNbcHJvcF0gPSBwYXJhbXNbcHJvcF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDQtdGB0LvQuCDQsdGL0Lsg0L/QtdGA0LXQtNCw0L0gY2FsbGJhY2sgLSDQstGL0L/QvtC70L3QuNGC0Ywg0LXQs9C+XHJcbiAgICAgICAgaWYgKHR5cGVvZiBjbG9zZVBhcmFtcy5jYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJylcclxuICAgICAgICAgICAgKGNsb3NlUGFyYW1zLmNhbGxiYWNrKSgpO1xyXG4gICAgICAgIC8vINC10YHQu9C4IHN0b3BBZnRlckNhbGxiYWNrINCx0YvQu9C+INC/0LXRgNC10LTQsNC90L4gdHJ1ZSAtINC/0YDQtdGA0LLQsNGC0Ywg0YHQutGA0LjQv9GCXHJcbiAgICAgICAgaWYgKGNsb3NlUGFyYW1zLnN0b3BBZnRlckNhbGxiYWNrID09PSB0cnVlKVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuXHJcbiAgICAgICAgLy8g0LXRgdC70Lgg0LfQsNC00LDQvSDQv9Cw0YDQsNC80LXRgtGAINGB0LrQvtGA0L7RgdGC0Lgg0LfQsNC60YDRi9GC0LjRjyDQv9C+0L/QsNC/0LAgLSDQuNGB0L/QvtC70YzQt9GD0LXQvCDQtdCz0L4sINC40L3QsNGH0LUg0LjRgdC/0L7Qu9GM0LfRg9C10Lwg0YHQutC+0YDQvtGB0YLRjCDQv9C+0L/QsNC/0LAsINGD0LrQsNC30LDQvdC90YPRjiDQsiDQvtCx0YrQtdC60YLQtSDQv9C+INGD0LzQvtC70YfQsNC90LjRjlxyXG4gICAgICAgIHZhciBjbG9zZVNwZWVkID0gY2xvc2VQYXJhbXMuc3BlZWQgIT09IGZhbHNlID8gY2xvc2VQYXJhbXMuc3BlZWQgOiB0aGlzLnNwZWVkO1xyXG5cclxuICAgICAgICB2YXIgYWN0aXZlUG9wdXBzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmVhc3ktcG9wdXAuYWN0aXZlJyk7XHJcbiAgICAgICAgaWYgKGFjdGl2ZVBvcHVwcy5sZW5ndGgpe1xyXG4gICAgICAgICAgICB2YXIgYW5pbWF0aW9uTmFtZU91dCA9IGNsb3NlUGFyYW1zLmFuaW1hdGlvbkNsb3NlICYmIHR5cGVvZiBjbG9zZVBhcmFtcy5hbmltYXRpb25DbG9zZSA9PT0gJ3N0cmluZycgPyBjbG9zZVBhcmFtcy5hbmltYXRpb25DbG9zZSA6IHRoaXMuZGVmYXVsdEFuaW1hdGlvbkNsb3NlLFxyXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uU3RyaW5nT3V0ID0gY2xvc2VTcGVlZCArICdtcyAnICsgYW5pbWF0aW9uTmFtZU91dCArICcgMSBsaW5lYXInO1xyXG5cclxuICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhY3RpdmVQb3B1cHMsIChub2RlKT0+e1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2NhbEZ1bmN0aW9ucy5yZW1vdmVDbGFzcyhub2RlLCAnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICBub2RlLnN0eWxlLldlYmtpdEFuaW1hdGlvbiA9IGFuaW1hdGlvblN0cmluZ091dDtcclxuICAgICAgICAgICAgICAgIG5vZGUuc3R5bGUuYW5pbWF0aW9uID0gYW5pbWF0aW9uU3RyaW5nT3V0O1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBkaXNwbGF5Tm9uZUNhbGxiYWNrID0gKCk9PntcclxuICAgICAgICAgICAgICAgIC8vINCy0YHQtdC8INC/0L7Qv9Cw0L/QsNC8INGB0YLQsNCy0LjQvCBkaXNwbGF5IG5vbmVcclxuICAgICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmVhc3ktcG9wdXAnKSwgZnVuY3Rpb24obm9kZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAoY2xvc2VTcGVlZClcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZGlzcGxheU5vbmVDYWxsYmFjaywgY2xvc2VTcGVlZCk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIGRpc3BsYXlOb25lQ2FsbGJhY2soKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBodG1sRWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2h0bWwnKSxcclxuICAgICAgICAgICAgYm9keUVsZW0gPSBkb2N1bWVudC5ib2R5O1xyXG5cclxuICAgICAgICB0aGlzLmxvY2FsRnVuY3Rpb25zLnJlbW92ZUNsYXNzKGh0bWxFbGVtLCAnZWFzeS1wb3B1cF9ib2R5LW9wZW4nKTtcclxuICAgICAgICB0aGlzLmxvY2FsRnVuY3Rpb25zLnJlbW92ZUNsYXNzKGJvZHlFbGVtLCAnZWFzeS1wb3B1cF9ib2R5LW9wZW4nKTtcclxuXHJcbiAgICAgICAgLy8g0LXRgdC70Lgg0L3QtSDQvtGC0LrQu9GO0YfQtdC90LAg0LDQstGC0L7Qv9GA0L7QutGA0YPRgtC60LBcclxuICAgICAgICBpZiAoIXRoaXMubm9TY3JvbGxUb3ApIHtcclxuICAgICAgICAgICAgbGV0IHNjcm9sbGluZ0VsZW1lbnQgPSBkb2N1bWVudC5zY3JvbGxpbmdFbGVtZW50IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxcclxuICAgICAgICAgICAgICAgIGNsYXNzVG9SZW1vdmUgPSAnZWFzeS1wb3B1cF9vdmVyZmxvdyc7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxGdW5jdGlvbnMucmVtb3ZlQ2xhc3MoaHRtbEVsZW0sIGNsYXNzVG9SZW1vdmUpO1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsRnVuY3Rpb25zLnJlbW92ZUNsYXNzKGJvZHlFbGVtLCBjbGFzc1RvUmVtb3ZlKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLnNjcm9sbFRvcCA9IDA7XHJcbiAgICAgICAgICAgIHNjcm9sbGluZ0VsZW1lbnQuc2Nyb2xsVG9wID0gdGhpcy5zY3JvbGxUb3A7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgY2xvc2VDb21wbGV0ZUNhbGxiYWNrID0gKCk9PntcclxuICAgICAgICAgICAgLy8kKCdodG1sLCBib2R5Jykuc3RvcCh0cnVlKTtcclxuICAgICAgICAgICAgdmFyIHRpbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWFzeS1wb3B1cC10aW50W2RhdGEtaWQ9XCInK3RoaXMuaWQrJ1wiXScpO1xyXG4gICAgICAgICAgICB0aW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxGdW5jdGlvbnMucmVtb3ZlQ2xhc3ModGludCwgJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB0aGlzLmlzQWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vINC/0YDQvtCy0LXRgNGP0LXQvCwg0LfQsNC00LDQvdCwINC70Lgg0LPQu9C+0LHQsNC70YzQvdCw0Y8g0L/QtdGA0LXQvNC10L3QvdCw0Y8g0YEgalF1ZXJ5LdC+0LHRitC10LrRgtC+0LwsINC90LAg0LrQvtGC0L7RgNC+0Lwg0LTQviDRjdGC0L7Qs9C+INCx0YvQuyDRhNC+0LrRg9GBXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93LmEzZTk1ZTE4MGNjMDRjOWQ4NWZmZGQ4ZWJlY2VmMDQ3ID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmEzZTk1ZTE4MGNjMDRjOWQ4NWZmZGQ4ZWJlY2VmMDQ3LmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgd2luZG93LmEzZTk1ZTE4MGNjMDRjOWQ4NWZmZGQ4ZWJlY2VmMDQ3O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uU3RhdGUgPSBmYWxzZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmFjdGlvblN0YXRlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgaWYgKGNsb3NlU3BlZWQpXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoY2xvc2VDb21wbGV0ZUNhbGxiYWNrLCBjbG9zZVNwZWVkKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGNsb3NlQ29tcGxldGVDYWxsYmFjaygpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBzZXRMb2FkaW5nKG1pbkxvYWRpbmdUaW1lID0gZmFsc2UsIGxvYWRpbmdQaWMgPSBmYWxzZSkge1xyXG4gICAgICAgIC8vINC00L7QsdCw0LLQu9GP0LXQvCDQutC70LDRgdGBINC30LDQs9GA0YPQt9C60LhcclxuICAgICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5sb2NhbEZ1bmN0aW9ucy5hZGRDbGFzcyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWFzeS1wb3B1cC10aW50W2RhdGEtaWQ9XCInK3RoaXMuaWQrJ1wiXScpLCAnaXNfbG9hZGluZycpO1xyXG5cclxuICAgICAgICAvLyDQtdGB0LvQuCDQt9Cw0LTQsNC90LAg0LrQsNGA0YLQuNC90LrQsCDQt9Cw0LPRgNGD0LfQutC4IC0g0YHRgtCw0LLQuNC8INC10ZEg0L3QsCDQt9Cw0LPRgNGD0LfQutGDINCy0LzQtdGB0YLQviDRgdGC0LDQvdC00LDRgNGC0L3QvtC5INC60YDRg9GC0LjQu9C60LggKNGB0L3QsNGH0LDQu9CwINC/0YDQvtCy0LXRgNGP0LXQvCAtINC/0LXRgNC10LTQsNC90LAg0LvQuCDQutCw0YDRgtC40L3QutCwINC90LDQv9GA0Y/QvNGD0Y4g0LIg0LzQtdGC0L7QtCwg0L/QvtGC0L7QvCAtINC/0LXRgNC10LTQsNC90LAg0LvQuCDQsiDQutC+0L3RgdGC0YDRg9C60YLQvtGAKVxyXG4gICAgICAgIGlmICghbG9hZGluZ1BpYylcclxuICAgICAgICAgICAgbG9hZGluZ1BpYyA9IHRoaXMuZGVmYXVsdExvYWRpbmdQaWM7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVhc3ktcG9wdXAtdGludFtkYXRhLWlkPVwiJyt0aGlzLmlkKydcIl0gLmVhc3ktcG9wdXBfX2xvYWRpbmcnKS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKFwiJytsb2FkaW5nUGljKydcIiknO1xyXG5cclxuICAgICAgICAvLyDQv9C+0LvRg9GH0LDQtdC8INC80LjQvdC40LzQsNC70YzQvdC+0LUg0LLRgNC10LzRjyDQt9Cw0LPRgNGD0LfQutC4XHJcbiAgICAgICAgaWYgKG1pbkxvYWRpbmdUaW1lID09PSBmYWxzZSB8fCBtaW5Mb2FkaW5nVGltZSA9PT0gbnVsbClcclxuICAgICAgICAgICAgbWluTG9hZGluZ1RpbWUgPSBNYXRoLm1heCh0aGlzLm1pbkxvYWRpbmdUaW1lLCB0aGlzLnNwZWVkKTtcclxuXHJcbiAgICAgICAgbGV0IHNldExvYWRpbmdDYWxsYmFjayA9ICgpPT57XHJcbiAgICAgICAgICAgIC8vINC/0L7RgdC70LUg0LfQsNC/0YPRgdC60LAg0YHQutGA0LjQv9GC0LAg0YLQsNC50LzQsNGD0YLQsCDRgdGA0LDQt9GDINC/0L7Rh9C40YHRgtC40YLRjCDQv9C10YDQtdC80LXQvdC90YPRjiAocHJldmVudCBkdXBsaWNhdGUgY2FsbHMpXHJcbiAgICAgICAgICAgIHRoaXMuZGVsYXllZExvYWRpbmcgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgLy8g0LXRgdC70Lgg0LIg0YLQtdGH0LXQvdC40LUg0YLQsNC50LzQsNGD0YLQsCDQsdGL0Lsg0LfQsNC/0YDQvtGBINC90LAg0YHQvdGP0YLQuNC1INC60LvQsNGB0YHQsCDQt9Cw0LPRgNGD0LfQutC4INC40Lcg0LzQtdGC0L7QtNCwIHVuc2V0TG9hZGluZyAtINC/0L7QstGC0L7RgNC90L4g0L7QsdGA0LDRgtC40YLRjNGB0Y8g0Log0Y3RgtC+0LzRgyDQvNC10YLQvtC00YMgKNCyINGN0YLQvtGCINGA0LDQtyDQvtC9INC+0YLRgNCw0LHQvtGC0LDQtdGCLCDRgi7Qui4gZGVsYXllZExvYWRpbmcg0YPQttC1INGA0LDQstC10L0gbnVsbClcclxuICAgICAgICAgICAgaWYgKHRoaXMuY2xvc2VBZnRlckRlbGF5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlQWZ0ZXJEZWxheSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51bnNldExvYWRpbmcoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmIChtaW5Mb2FkaW5nVGltZSlcclxuICAgICAgICAgICAgLy8g0YPRgdGC0LDQvdC+0LLQuNGC0Ywg0YLQsNC50LzQsNGD0YIgLSDQvNC40L3QuNC80LDQu9GM0L3QvtC1INCy0YDQtdC80Y8sINCyINGC0LXRh9C10L3QuNC1INC60L7RgtC+0YDQvtCz0L4g0LTQvtC70LbQvdCwINC+0YLQvtCx0YDQsNC20LDRgtGM0YHRjyDQsNC90LjQvNCw0YbQuNGPINC30LDQs9GA0YPQt9C60LhcclxuICAgICAgICAgICAgdGhpcy5kZWxheWVkTG9hZGluZyA9IHNldFRpbWVvdXQoc2V0TG9hZGluZ0NhbGxiYWNrLCBtaW5Mb2FkaW5nVGltZSk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBzZXRMb2FkaW5nQ2FsbGJhY2soKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgdW5zZXRMb2FkaW5nKCkge1xyXG4gICAgICAgIC8vINC10YHQu9C4INC30LDQv9GD0YnQtdC9INGC0LDQudC80LDRg9GCLCDRgtC+INC/0L4g0LjRgdGC0LXRh9C10L3QuNC4INGN0YLQvtCz0L4g0YLQsNC50LzQsNGD0YLQsCDQvdGD0LbQvdC+INGB0L/RgNGP0YLQsNGC0Ywg0LjQvdC00LjQutCw0YLQvtGAINC30LDQs9GA0YPQt9C60LhcclxuICAgICAgICBpZiAodGhpcy5kZWxheWVkTG9hZGluZykge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlQWZ0ZXJEZWxheSA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g0YLQsNC50LzQsNGD0YIg0L3QtSDRg9GB0YLQsNC90L7QstC70LXQvSwgLSDQt9C90LDRh9C40YIg0YHQvdGP0YLRjCDQutC70LDRgdGBINC30LDQs9GA0YPQt9C60LhcclxuICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubG9jYWxGdW5jdGlvbnMucmVtb3ZlQ2xhc3MoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVhc3ktcG9wdXAtdGludFtkYXRhLWlkPVwiJyt0aGlzLmlkKydcIl0nKSwgJ2lzX2xvYWRpbmcnKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBaEJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQXVCQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQS9DQTtBQXRCQTtBQXlFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBS0E7QUEzQkE7QUFDQTtBQTZCQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFHQTtBQUlBO0FBQ0E7QUFhQTtBQWRBO0FBQ0E7QUE2QkE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBSUE7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFkQTtBQWdCQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQVdBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWkE7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQVVBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVhBO0FBYUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFEQTtBQXpKQTtBQThKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFEQTtBQU5BO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQURBO0FBTkE7QUFVQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBREE7QUFUQTtBQWFBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFEQTtBQVRBO0FBbENBO0FBQ0E7QUFnREE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBOzs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUE3aEJBO0FBQUE7QUFBQTtBQWdpQkE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBakJBO0FBQUE7QUFBQTtBQUFBO0FBcUJBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBcjFCQTtBQUFBO0FBQUE7QUF1MUJBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFHQTs7Ozs7Ozs7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFDQTtBQU1BO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUtBO0FBQ0E7QUExN0JBO0FBQUE7QUFBQTtBQTQ3QkE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUE1OUJBO0FBQUE7QUFBQTtBQSs5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQTErQkE7QUFDQTtBQURBO0FBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/easy-popup_module.js\n");

/***/ }),

/***/ "./test/test.js":
/*!**********************!*\
  !*** ./test/test.js ***!
  \**********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _src_easy_popup_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../src/easy-popup_module */ \"./src/easy-popup_module.js\");\n//import '@babel/polyfill'; // установить и импортировать, если что-то не работает в эксплорере\n\n\nvar isTouch = function isTouch() {\n  // true if touch / false if not\n  return 'ontouchstart' in window || 'onmsgesturechange' in window;\n};\n\nvar iosDetection = function iosDetection() {\n  // true if ios / false if not\n  return navigator.platform.indexOf('iPad') !== -1 || navigator.platform.indexOf('iPhone') !== -1;\n};\n\nwindow.onload = function () {\n  // popup example working on iOS\n  window.popupIOS = new _src_easy_popup_module__WEBPACK_IMPORTED_MODULE_0__[\"EasyPopup\"]({\n    noScrollTop: isTouch() && !iosDetection(),\n    // for all touch devices except iOS\n    hideOnIos: '.page-wrapper' // other params, if necessary\n\n  });\n  document.querySelector('button').addEventListener('click', function () {\n    popupIOS.show(); // P.S. for iOS devices other styling will be used, as indicated in the params (to avoid positioning bugs)\n  });\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi90ZXN0L3Rlc3QuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi90ZXN0L3Rlc3QuanM/MzdhYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvL2ltcG9ydCAnQGJhYmVsL3BvbHlmaWxsJzsgLy8g0YPRgdGC0LDQvdC+0LLQuNGC0Ywg0Lgg0LjQvNC/0L7RgNGC0LjRgNC+0LLQsNGC0YwsINC10YHQu9C4INGH0YLQvi3RgtC+INC90LUg0YDQsNCx0L7RgtCw0LXRgiDQsiDRjdC60YHQv9C70L7RgNC10YDQtVxyXG5pbXBvcnQge0Vhc3lQb3B1cH0gZnJvbSAnLi4vc3JjL2Vhc3ktcG9wdXBfbW9kdWxlJztcclxuXHJcbmxldCBpc1RvdWNoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gdHJ1ZSBpZiB0b3VjaCAvIGZhbHNlIGlmIG5vdFxyXG4gICAgcmV0dXJuICgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpIHx8ICgnb25tc2dlc3R1cmVjaGFuZ2UnIGluIHdpbmRvdyk7XHJcbn07XHJcblxyXG5sZXQgaW9zRGV0ZWN0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICAvLyB0cnVlIGlmIGlvcyAvIGZhbHNlIGlmIG5vdFxyXG4gICAgcmV0dXJuICgobmF2aWdhdG9yLnBsYXRmb3JtLmluZGV4T2YoJ2lQYWQnKSAhPT0gLTEpfHwobmF2aWdhdG9yLnBsYXRmb3JtLmluZGV4T2YoJ2lQaG9uZScpICE9PSAtMSkpO1xyXG59O1xyXG5cclxud2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAvLyBwb3B1cCBleGFtcGxlIHdvcmtpbmcgb24gaU9TXHJcbiAgICB3aW5kb3cucG9wdXBJT1MgPSBuZXcgRWFzeVBvcHVwKHtcclxuICAgICAgICBub1Njcm9sbFRvcDogaXNUb3VjaCgpICYmICFpb3NEZXRlY3Rpb24oKSwgLy8gZm9yIGFsbCB0b3VjaCBkZXZpY2VzIGV4Y2VwdCBpT1NcclxuICAgICAgICBoaWRlT25Jb3M6ICcucGFnZS13cmFwcGVyJ1xyXG5cclxuICAgICAgICAvLyBvdGhlciBwYXJhbXMsIGlmIG5lY2Vzc2FyeVxyXG4gICAgfSk7XHJcblxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIHBvcHVwSU9TLnNob3coKTsgLy8gUC5TLiBmb3IgaU9TIGRldmljZXMgb3RoZXIgc3R5bGluZyB3aWxsIGJlIHVzZWQsIGFzIGluZGljYXRlZCBpbiB0aGUgcGFyYW1zICh0byBhdm9pZCBwb3NpdGlvbmluZyBidWdzKVxyXG4gICAgfSk7XHJcbn07Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUhBO0FBT0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./test/test.js\n");

/***/ })

/******/ });